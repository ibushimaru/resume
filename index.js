var Or=Object.defineProperty;var Zt=e=>{throw TypeError(e)};var Cr=(e,t,n)=>t in e?Or(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var x=(e,t,n)=>Cr(e,typeof t!="symbol"?t+"":t,n),yt=(e,t,n)=>t.has(e)||Zt("Cannot "+n);var c=(e,t,n)=>(yt(e,t,"read from private field"),n?n.call(e):t.get(e)),R=(e,t,n)=>t.has(e)?Zt("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),v=(e,t,n,r)=>(yt(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n),C=(e,t,n)=>(yt(e,t,"access private method"),n);var Jt=(e,t,n,r)=>({set _(s){v(e,t,s,n)},get _(){return c(e,t,r)}});import{AsyncLocalStorage as Ar}from"node:async_hooks";function kr(){const{process:e,Deno:t}=globalThis;return!(typeof(t==null?void 0:t.noColor)=="boolean"?t.noColor:e!==void 0?"NO_COLOR"in(e==null?void 0:e.env):!1)}var $t="__COMPOSED_HANDLER",Pn=e=>e.length>1,_n=e=>e[$t]?_n(e[$t]):e,Pr=e=>e.name||(Pn(e)?"[middleware]":"[handler]"),_r=e=>e.routes.map(({path:t,method:n,handler:r})=>{const s=_n(r);return{path:t,method:n,name:Pr(s),isMiddleware:Pn(s)}}),$r=(e,t)=>{const n=kr(),r={};let s=0,o=0;_r(e).filter(({isMiddleware:i})=>!i).map(i=>{const a=`${i.method}-${i.path}`;if((r[a]||(r[a]=[])).push(i),!(r[a].length>1))return s=Math.max(s,i.method.length),o=Math.max(o,i.path.length),{method:i.method,path:i.path,routes:r[a]}}).forEach(i=>{if(!i)return;const{method:a,path:l,routes:u}=i,f=n?`\x1B[32m${a}\x1B[0m`:a;console.log(`${f} ${" ".repeat(s-a.length)} ${l}`)})};const jr=e=>(e.status(404),e.render("404 Not Found")),Nr=Object.freeze(Object.defineProperty({__proto__:null,default:jr},Symbol.toStringTag,{value:"Module"})),Tr=(e,t)=>"getResponse"in e?e.getResponse():(console.error(e.message),t.status(500),t.render("Internal Server Error")),Mr=Object.freeze(Object.defineProperty({__proto__:null,default:Tr},Symbol.toStringTag,{value:"Module"}));var $n={Stringify:1},B=(e,t)=>{const n=new String(e);return n.isEscaped=!0,n.callbacks=t,n},Dr=/[&<>'"]/,jn=async(e,t)=>{let n="";t||(t=[]);const r=await Promise.all(e);for(let s=r.length-1;n+=r[s],s--,!(s<0);s--){let o=r[s];typeof o=="object"&&t.push(...o.callbacks||[]);const i=o.isEscaped;if(o=await(typeof o=="object"?o.toString():o),typeof o=="object"&&t.push(...o.callbacks||[]),o.isEscaped??i)n+=o;else{const a=[n];ue(o,a),n=a[0]}}return B(n,t)},ue=(e,t)=>{const n=e.search(Dr);if(n===-1){t[0]+=e;return}let r,s,o=0;for(s=n;s<e.length;s++){switch(e.charCodeAt(s)){case 34:r="&quot;";break;case 39:r="&#39;";break;case 38:r="&amp;";break;case 60:r="&lt;";break;case 62:r="&gt;";break;default:continue}t[0]+=e.substring(o,s)+r,o=s+1}t[0]+=e.substring(o,s)},Nn=e=>{const t=e.callbacks;if(!(t!=null&&t.length))return e;const n=[e],r={};return t.forEach(s=>s({phase:$n.Stringify,buffer:n,context:r})),n[0]},Tn=async(e,t,n,r,s)=>{typeof e=="object"&&!(e instanceof String)&&(e instanceof Promise||(e=e.toString()),e instanceof Promise&&(e=await e));const o=e.callbacks;return o!=null&&o.length?(s?s[0]+=e:s=[e],Promise.all(o.map(a=>a({phase:t,buffer:s,context:r}))).then(a=>Promise.all(a.filter(Boolean).map(l=>Tn(l,t,!1,r,s))).then(()=>s[0]))):Promise.resolve(e)},Ir=(e,...t)=>{const n=[""];for(let r=0,s=e.length-1;r<s;r++){n[0]+=e[r];const o=Array.isArray(t[r])?t[r].flat(1/0):[t[r]];for(let i=0,a=o.length;i<a;i++){const l=o[i];if(typeof l=="string")ue(l,n);else if(typeof l=="number")n[0]+=l;else{if(typeof l=="boolean"||l===null||l===void 0)continue;if(typeof l=="object"&&l.isEscaped)if(l.callbacks)n.unshift("",l);else{const u=l.toString();u instanceof Promise?n.unshift("",u):n[0]+=u}else l instanceof Promise?n.unshift("",l):ue(l.toString(),n)}}}return n[0]+=e.at(-1),n.length===1?"callbacks"in n?B(Nn(B(n[0],n.callbacks))):B(n[0]):jn(n,n.callbacks)},Ut=Symbol("RENDERER"),jt=Symbol("ERROR_HANDLER"),k=Symbol("STASH"),Mn=Symbol("INTERNAL"),Lr=Symbol("MEMO"),dt=Symbol("PERMALINK"),Qt=e=>(e[Mn]=!0,e),Dn=e=>({value:t,children:n})=>{if(!n)return;const r={children:[{tag:Qt(()=>{e.push(t)}),props:{}}]};Array.isArray(n)?r.children.push(...n.flat()):r.children.push(n),r.children.push({tag:Qt(()=>{e.pop()}),props:{}});const s={tag:"",props:r,type:""};return s[jt]=o=>{throw e.pop(),o},s},In=e=>{const t=[e],n=Dn(t);return n.values=t,n.Provider=n,_e.push(n),n},_e=[],zt=e=>{const t=[e],n=r=>{t.push(r.value);let s;try{s=r.children?(Array.isArray(r.children)?new Bn("",{},r.children):r.children).toString():""}finally{t.pop()}return s instanceof Promise?s.then(o=>B(o,o.callbacks)):B(s)};return n.values=t,n.Provider=n,n[Ut]=Dn(t),_e.push(n),n},Ee=e=>e.values.at(-1),st={title:[],script:["src"],style:["data-href"],link:["href"],meta:["name","httpEquiv","charset","itemProp"]},Nt={},ot="data-precedence",Qe=e=>Array.isArray(e)?e:[e],Yt=new WeakMap,en=(e,t,n,r)=>({buffer:s,context:o})=>{if(!s)return;const i=Yt.get(o)||{};Yt.set(o,i);const a=i[e]||(i[e]=[]);let l=!1;const u=st[e];if(u.length>0){e:for(const[,f]of a)for(const h of u)if(((f==null?void 0:f[h])??null)===(n==null?void 0:n[h])){l=!0;break e}}if(l?s[0]=s[0].replaceAll(t,""):u.length>0?a.push([t,n,r]):a.unshift([t,n,r]),s[0].indexOf("</head>")!==-1){let f;if(r===void 0)f=a.map(([h])=>h);else{const h=[];f=a.map(([d,,g])=>{let y=h.indexOf(g);return y===-1&&(h.push(g),y=h.length-1),[d,y]}).sort((d,g)=>d[1]-g[1]).map(([d])=>d)}f.forEach(h=>{s[0]=s[0].replaceAll(h,"")}),s[0]=s[0].replace(/(?=<\/head>)/,f.join(""))}},Ye=(e,t,n)=>B(new G(e,n,Qe(t??[])).toString()),et=(e,t,n,r)=>{if("itemProp"in n)return Ye(e,t,n);let{precedence:s,blocking:o,...i}=n;s=r?s??"":void 0,r&&(i[ot]=s);const a=new G(e,i,Qe(t||[])).toString();return a instanceof Promise?a.then(l=>B(a,[...l.callbacks||[],en(e,l,i,s)])):B(a,[en(e,a,i,s)])},Hr=({children:e,...t})=>{const n=Wt();if(n){const r=Ee(n);if(r==="svg"||r==="head")return new G("title",t,Qe(e??[]))}return et("title",e,t,!1)},Fr=({children:e,...t})=>{const n=Wt();return["src","async"].some(r=>!t[r])||n&&Ee(n)==="head"?Ye("script",e,t):et("script",e,t,!1)},Br=({children:e,...t})=>["href","precedence"].every(n=>n in t)?(t["data-href"]=t.href,delete t.href,et("style",e,t,!0)):Ye("style",e,t),Ur=({children:e,...t})=>["onLoad","onError"].some(n=>n in t)||t.rel==="stylesheet"&&(!("precedence"in t)||"disabled"in t)?Ye("link",e,t):et("link",e,t,"precedence"in t),zr=({children:e,...t})=>{const n=Wt();return n&&Ee(n)==="head"?Ye("meta",e,t):et("meta",e,t,!1)},Ln=(e,{children:t,...n})=>new G(e,n,Qe(t??[])),Wr=e=>(typeof e.action=="function"&&(e.action=dt in e.action?e.action[dt]:void 0),Ln("form",e)),Hn=(e,t)=>(typeof t.formAction=="function"&&(t.formAction=dt in t.formAction?t.formAction[dt]:void 0),Ln(e,t)),Vr=e=>Hn("input",e),Gr=e=>Hn("button",e);const bt=Object.freeze(Object.defineProperty({__proto__:null,button:Gr,form:Wr,input:Vr,link:Ur,meta:zr,script:Fr,style:Br,title:Hr},Symbol.toStringTag,{value:"Module"}));var qr=new Map([["className","class"],["htmlFor","for"],["crossOrigin","crossorigin"],["httpEquiv","http-equiv"],["itemProp","itemprop"],["fetchPriority","fetchpriority"],["noModule","nomodule"],["formAction","formaction"]]),pt=e=>qr.get(e)||e,Fn=(e,t)=>{for(const[n,r]of Object.entries(e)){const s=n[0]==="-"||!/[A-Z]/.test(n)?n:n.replace(/[A-Z]/g,o=>`-${o.toLowerCase()}`);t(s,r==null?null:typeof r=="number"?s.match(/^(?:a|border-im|column(?:-c|s)|flex(?:$|-[^b])|grid-(?:ar|[^a])|font-w|li|or|sca|st|ta|wido|z)|ty$/)?`${r}`:`${r}px`:r)}},ze=void 0,Wt=()=>ze,Kr=e=>/[A-Z]/.test(e)&&e.match(/^(?:al|basel|clip(?:Path|Rule)$|co|do|fill|fl|fo|gl|let|lig|i|marker[EMS]|o|pai|pointe|sh|st[or]|text[^L]|tr|u|ve|w)/)?e.replace(/([A-Z])/g,"-$1").toLowerCase():e,Xr=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"],Zr=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","download","formnovalidate","hidden","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],Vt=(e,t)=>{for(let n=0,r=e.length;n<r;n++){const s=e[n];if(typeof s=="string")ue(s,t);else{if(typeof s=="boolean"||s===null||s===void 0)continue;s instanceof G?s.toStringToBuffer(t):typeof s=="number"||s.isEscaped?t[0]+=s:s instanceof Promise?t.unshift("",s):Vt(s,t)}}},G=class{constructor(e,t,n){x(this,"tag");x(this,"props");x(this,"key");x(this,"children");x(this,"isEscaped",!0);x(this,"localContexts");this.tag=e,this.props=t,this.children=n}get type(){return this.tag}get ref(){return this.props.ref||null}toString(){var t,n;const e=[""];(t=this.localContexts)==null||t.forEach(([r,s])=>{r.values.push(s)});try{this.toStringToBuffer(e)}finally{(n=this.localContexts)==null||n.forEach(([r])=>{r.values.pop()})}return e.length===1?"callbacks"in e?Nn(B(e[0],e.callbacks)).toString():e[0]:jn(e,e.callbacks)}toStringToBuffer(e){const t=this.tag,n=this.props;let{children:r}=this;e[0]+=`<${t}`;const s=ze&&Ee(ze)==="svg"?o=>Kr(pt(o)):o=>pt(o);for(let[o,i]of Object.entries(n))if(o=s(o),o!=="children"){if(o==="style"&&typeof i=="object"){let a="";Fn(i,(l,u)=>{u!=null&&(a+=`${a?";":""}${l}:${u}`)}),e[0]+=' style="',ue(a,e),e[0]+='"'}else if(typeof i=="string")e[0]+=` ${o}="`,ue(i,e),e[0]+='"';else if(i!=null)if(typeof i=="number"||i.isEscaped)e[0]+=` ${o}="${i}"`;else if(typeof i=="boolean"&&Zr.includes(o))i&&(e[0]+=` ${o}=""`);else if(o==="dangerouslySetInnerHTML"){if(r.length>0)throw"Can only set one of `children` or `props.dangerouslySetInnerHTML`.";r=[B(i.__html)]}else if(i instanceof Promise)e[0]+=` ${o}="`,e.unshift('"',i);else if(typeof i=="function"){if(!o.startsWith("on"))throw`Invalid prop '${o}' of type 'function' supplied to '${t}'.`}else e[0]+=` ${o}="`,ue(i.toString(),e),e[0]+='"'}if(Xr.includes(t)&&r.length===0){e[0]+="/>";return}e[0]+=">",Vt(r,e),e[0]+=`</${t}>`}},wt=class extends G{toStringToBuffer(e){const{children:t}=this,n=this.tag.call(null,{...this.props,children:t.length<=1?t[0]:t});if(!(typeof n=="boolean"||n==null))if(n instanceof Promise)if(_e.length===0)e.unshift("",n);else{const r=_e.map(s=>[s,s.values.at(-1)]);e.unshift("",n.then(s=>(s instanceof G&&(s.localContexts=r),s)))}else n instanceof G?n.toStringToBuffer(e):typeof n=="number"||n.isEscaped?(e[0]+=n,n.callbacks&&(e.callbacks||(e.callbacks=[]),e.callbacks.push(...n.callbacks))):ue(n,e)}},Bn=class extends G{toStringToBuffer(e){Vt(this.children,e)}},Tt=(e,t,...n)=>{t??(t={}),n.length&&(t.children=n.length===1?n[0]:n);const r=t.key;delete t.key;const s=it(e,t,n);return s.key=r,s},tn=!1,it=(e,t,n)=>{if(!tn){for(const r in Nt)bt[r][Ut]=Nt[r];tn=!0}return typeof e=="function"?new wt(e,t,n):bt[e]?new wt(bt[e],t,n):e==="svg"||e==="head"?(ze||(ze=zt("")),new G(e,t,[new wt(ze,{value:e},n)])):new G(e,t,n)},$e=({children:e})=>new Bn("",{children:e},Array.isArray(e)?e:e?[e]:[]),Jr=e=>!!(e&&typeof e=="object"&&"tag"in e&&"props"in e);function p(e,t,n){let r;if(!t||!("children"in t))r=it(e,t,[]);else{const s=t.children;r=Array.isArray(s)?it(e,t,s):it(e,t,[s])}return r.key=n,r}var We="_hp",Qr={Change:"Input",DoubleClick:"DblClick"},Yr={svg:"2000/svg",math:"1998/Math/MathML"},je=[],Mt=new WeakMap,Ne=void 0,es=()=>Ne,Z=e=>"t"in e,xt={onClick:["click",!1]},nn=e=>{if(!e.startsWith("on"))return;if(xt[e])return xt[e];const t=e.match(/^on([A-Z][a-zA-Z]+?(?:PointerCapture)?)(Capture)?$/);if(t){const[,n,r]=t;return xt[e]=[(Qr[n]||n).toLowerCase(),!!r]}},rn=(e,t)=>Ne&&e instanceof SVGElement&&/[A-Z]/.test(t)&&(t in e.style||t.match(/^(?:o|pai|str|u|ve)/))?t.replace(/([A-Z])/g,"-$1").toLowerCase():t,ts=(e,t,n)=>{var r;t||(t={});for(let s in t){const o=t[s];if(s!=="children"&&(!n||n[s]!==o)){s=pt(s);const i=nn(s);if(i){if((n==null?void 0:n[s])!==o&&(n&&e.removeEventListener(i[0],n[s],i[1]),o!=null)){if(typeof o!="function")throw new Error(`Event handler for "${s}" is not a function`);e.addEventListener(i[0],o,i[1])}}else if(s==="dangerouslySetInnerHTML"&&o)e.innerHTML=o.__html;else if(s==="ref"){let a;typeof o=="function"?a=o(e)||(()=>o(null)):o&&"current"in o&&(o.current=e,a=()=>o.current=null),Mt.set(e,a)}else if(s==="style"){const a=e.style;typeof o=="string"?a.cssText=o:(a.cssText="",o!=null&&Fn(o,a.setProperty.bind(a)))}else{if(s==="value"){const l=e.nodeName;if(l==="INPUT"||l==="TEXTAREA"||l==="SELECT"){if(e.value=o==null||o===!1?null:o,l==="TEXTAREA"){e.textContent=o;continue}else if(l==="SELECT"){e.selectedIndex===-1&&(e.selectedIndex=0);continue}}}else(s==="checked"&&e.nodeName==="INPUT"||s==="selected"&&e.nodeName==="OPTION")&&(e[s]=o);const a=rn(e,s);o==null||o===!1?e.removeAttribute(a):o===!0?e.setAttribute(a,""):typeof o=="string"||typeof o=="number"?e.setAttribute(a,o):e.setAttribute(a,o.toString())}}}if(n)for(let s in n){const o=n[s];if(s!=="children"&&!(s in t)){s=pt(s);const i=nn(s);i?e.removeEventListener(i[0],o,i[1]):s==="ref"?(r=Mt.get(e))==null||r():e.removeAttribute(rn(e,s))}}},ns=(e,t)=>{t[k][0]=0,je.push([e,t]);const n=t.tag[Ut]||t.tag,r=n.defaultProps?{...n.defaultProps,...t.props}:t.props;try{return[n.call(null,r)]}finally{je.pop()}},Un=(e,t,n,r,s)=>{var o,i;(o=e.vR)!=null&&o.length&&(r.push(...e.vR),delete e.vR),typeof e.tag=="function"&&((i=e[k][1][Fe])==null||i.forEach(a=>s.push(a))),e.vC.forEach(a=>{var l;if(Z(a))n.push(a);else if(typeof a.tag=="function"||a.tag===""){a.c=t;const u=n.length;if(Un(a,t,n,r,s),a.s){for(let f=u;f<n.length;f++)n[f].s=!0;a.s=!1}}else n.push(a),(l=a.vR)!=null&&l.length&&(r.push(...a.vR),delete a.vR)})},rs=e=>{for(;;e=e.tag===We||!e.vC||!e.pP?e.nN:e.vC[0]){if(!e)return null;if(e.tag!==We&&e.e)return e.e}},zn=e=>{var t,n,r,s,o,i;Z(e)||((n=(t=e[k])==null?void 0:t[1][Fe])==null||n.forEach(a=>{var l;return(l=a[2])==null?void 0:l.call(a)}),(r=Mt.get(e.e))==null||r(),e.p===2&&((s=e.vC)==null||s.forEach(a=>a.p=2)),(o=e.vC)==null||o.forEach(zn)),e.p||((i=e.e)==null||i.remove(),delete e.e),typeof e.tag=="function"&&(Ie.delete(e),at.delete(e),delete e[k][3],e.a=!0)},Wn=(e,t,n)=>{e.c=t,Vn(e,t,n)},sn=(e,t)=>{if(t){for(let n=0,r=e.length;n<r;n++)if(e[n]===t)return n}},on=Symbol(),Vn=(e,t,n)=>{var u;const r=[],s=[],o=[];Un(e,t,r,s,o),s.forEach(zn);const i=n?void 0:t.childNodes;let a,l=null;if(n)a=-1;else if(!i.length)a=0;else{const f=sn(i,rs(e.nN));f!==void 0?(l=i[f],a=f):a=sn(i,(u=r.find(h=>h.tag!==We&&h.e))==null?void 0:u.e)??-1,a===-1&&(n=!0)}for(let f=0,h=r.length;f<h;f++,a++){const d=r[f];let g;if(d.s&&d.e)g=d.e,d.s=!1;else{const y=n||!d.e;Z(d)?(d.e&&d.d&&(d.e.textContent=d.t),d.d=!1,g=d.e||(d.e=document.createTextNode(d.t))):(g=d.e||(d.e=d.n?document.createElementNS(d.n,d.tag):document.createElement(d.tag)),ts(g,d.props,d.pP),Vn(d,g,y))}d.tag===We?a--:n?g.parentNode||t.appendChild(g):i[a]!==g&&i[a-1]!==g&&(i[a+1]===g?t.appendChild(i[a]):t.insertBefore(g,l||i[a]||null))}if(e.pP&&delete e.pP,o.length){const f=[],h=[];o.forEach(([,d,,g,y])=>{d&&f.push(d),g&&h.push(g),y==null||y()}),f.forEach(d=>d()),h.length&&requestAnimationFrame(()=>{h.forEach(d=>d())})}},ss=(e,t)=>!!(e&&e.length===t.length&&e.every((n,r)=>n[1]===t[r][1])),at=new WeakMap,Dt=(e,t,n)=>{var o,i,a,l,u,f;const r=!n&&t.pC;n&&(t.pC||(t.pC=t.vC));let s;try{n||(n=typeof t.tag=="function"?ns(e,t):Qe(t.props.children)),((o=n[0])==null?void 0:o.tag)===""&&n[0][jt]&&(s=n[0][jt],e[5].push([e,s,t]));const h=r?[...t.pC]:t.vC?[...t.vC]:void 0,d=[];let g;for(let y=0;y<n.length;y++){Array.isArray(n[y])&&n.splice(y,1,...n[y].flat());let m=os(n[y]);if(m){typeof m.tag=="function"&&!m.tag[Mn]&&(_e.length>0&&(m[k][2]=_e.map(w=>[w,w.values.at(-1)])),(i=e[5])!=null&&i.length&&(m[k][3]=e[5].at(-1)));let b;if(h&&h.length){const w=h.findIndex(Z(m)?E=>Z(E):m.key!==void 0?E=>E.key===m.key&&E.tag===m.tag:E=>E.tag===m.tag);w!==-1&&(b=h[w],h.splice(w,1))}if(b)if(Z(m))b.t!==m.t&&(b.t=m.t,b.d=!0),m=b;else{const w=b.pP=b.props;if(b.props=m.props,b.f||(b.f=m.f||t.f),typeof m.tag=="function"){const E=b[k][2];b[k][2]=m[k][2]||[],b[k][3]=m[k][3],!b.f&&((b.o||b)===m.o||(l=(a=b.tag)[Lr])!=null&&l.call(a,w,b.props))&&ss(E,b[k][2])&&(b.s=!0)}m=b}else if(!Z(m)&&Ne){const w=Ee(Ne);w&&(m.n=w)}if(!Z(m)&&!m.s&&(Dt(e,m),delete m.f),d.push(m),g&&!g.s&&!m.s)for(let w=g;w&&!Z(w);w=(u=w.vC)==null?void 0:u.at(-1))w.nN=m;g=m}}t.vR=r?[...t.vC,...h||[]]:h||[],t.vC=d,r&&delete t.pC}catch(h){if(t.f=!0,h===on){if(s)return;throw h}const[d,g,y]=((f=t[k])==null?void 0:f[3])||[];if(g){const m=()=>lt([0,!1,e[2]],y),b=at.get(y)||[];b.push(m),at.set(y,b);const w=g(h,()=>{const E=at.get(y);if(E){const S=E.indexOf(m);if(S!==-1)return E.splice(S,1),m()}});if(w){if(e[0]===1)e[1]=!0;else if(Dt(e,y,[w]),(g.length===1||e!==d)&&y.c){Wn(y,y.c,!1);return}throw on}}throw h}finally{s&&e[5].pop()}},os=e=>{if(!(e==null||typeof e=="boolean")){if(typeof e=="string"||typeof e=="number")return{t:e.toString(),d:!0};if("vR"in e&&(e={tag:e.tag,props:e.props,key:e.key,f:e.f,type:e.tag,ref:e.props.ref,o:e.o||e}),typeof e.tag=="function")e[k]=[0,[]];else{const t=Yr[e.tag];t&&(Ne||(Ne=In("")),e.props.children=[{tag:Ne,props:{value:e.n=`http://www.w3.org/${t}`,children:e.props.children}}])}return e}},an=(e,t)=>{var n,r;(n=t[k][2])==null||n.forEach(([s,o])=>{s.values.push(o)});try{Dt(e,t,void 0)}catch{return}if(t.a){delete t.a;return}(r=t[k][2])==null||r.forEach(([s])=>{s.values.pop()}),(e[0]!==1||!e[1])&&Wn(t,t.c,!1)},Ie=new WeakMap,ln=[],lt=async(e,t)=>{e[5]||(e[5]=[]);const n=Ie.get(t);n&&n[0](void 0);let r;const s=new Promise(o=>r=o);if(Ie.set(t,[r,()=>{e[2]?e[2](e,t,o=>{an(o,t)}).then(()=>r(t)):(an(e,t),r(t))}]),ln.length)ln.at(-1).add(t);else{await Promise.resolve();const o=Ie.get(t);o&&(Ie.delete(t),o[1]())}return s},is=(e,t,n)=>({tag:We,props:{children:e},key:n,e:t,p:1}),Et=0,Fe=1,St=2,Rt=3,Ot=new WeakMap,Gt=(e,t)=>!e||!t||e.length!==t.length||t.some((n,r)=>n!==e[r]),as=void 0,cn=[],Ve=e=>{var i;const t=()=>typeof e=="function"?e():e,n=je.at(-1);if(!n)return[t(),()=>{}];const[,r]=n,s=(i=r[k][1])[Et]||(i[Et]=[]),o=r[k][0]++;return s[o]||(s[o]=[t(),a=>{const l=as,u=s[o];if(typeof a=="function"&&(a=a(u[0])),!Object.is(a,u[0]))if(u[0]=a,cn.length){const[f,h]=cn.at(-1);Promise.all([f===3?r:lt([f,!1,l],r),h]).then(([d])=>{if(!d||!(f===2||f===3))return;const g=d.vC;requestAnimationFrame(()=>{setTimeout(()=>{g===d.vC&&lt([f===3?1:0,!1,l],d)})})})}else lt([0,!1,l],r)}])},ls=(e,t,n)=>{var u;const r=je.at(-1);if(!r)return;const[,s]=r,o=(u=s[k][1])[Fe]||(u[Fe]=[]),i=s[k][0]++,[a,,l]=o[i]||(o[i]=[]);if(Gt(a,n)){l&&l();const f=()=>{h[e]=void 0,h[2]=t()},h=[n,void 0,void 0,void 0,void 0];h[e]=f,o[i]=h}},un=(e,t)=>ls(3,e,t),qt=(e,t)=>{var a;const n=je.at(-1);if(!n)return e;const[,r]=n,s=(a=r[k][1])[St]||(a[St]=[]),o=r[k][0]++,i=s[o];return Gt(i==null?void 0:i[1],t)?s[o]=[e,t]:e=s[o][0],e},cs=e=>{const t=Ot.get(e);if(t){if(t.length===2)throw t[1];return t[0]}throw e.then(n=>Ot.set(e,[n]),n=>Ot.set(e,[void 0,n])),e},us=(e,t)=>{var a;const n=je.at(-1);if(!n)return e();const[,r]=n,s=(a=r[k][1])[Rt]||(a[Rt]=[]),o=r[k][0]++,i=s[o];return Gt(i==null?void 0:i[1],t)&&(s[o]=[e(),t]),s[o][0]},fs=In({pending:!1,data:null,method:null,action:null}),fn=new Set,hs=e=>{fn.add(e),e.finally(()=>fn.delete(e))},Kt=(e,t)=>us(()=>n=>{let r;e&&(typeof e=="function"?r=e(n)||(()=>{e(null)}):e&&"current"in e&&(e.current=n,r=()=>{e.current=null}));const s=t(n);return()=>{s==null||s(),r==null||r()}},[e]),Se=Object.create(null),nt=Object.create(null),tt=(e,t,n,r,s)=>{if(t!=null&&t.itemProp)return{tag:e,props:t,type:e,ref:t.ref};const o=document.head;let{onLoad:i,onError:a,precedence:l,blocking:u,...f}=t,h=null,d=!1;const g=st[e];let y;if(g.length>0){const E=o.querySelectorAll(e);e:for(const S of E)for(const O of st[e])if(S.getAttribute(O)===t[O]){h=S;break e}if(!h){const S=g.reduce((O,A)=>t[A]===void 0?O:`${O}-${A}-${t[A]}`,e);d=!nt[S],h=nt[S]||(nt[S]=(()=>{const O=document.createElement(e);for(const A of g)t[A]!==void 0&&O.setAttribute(A,t[A]),t.rel&&O.setAttribute("rel",t.rel);return O})())}}else y=o.querySelectorAll(e);l=r?l??"":void 0,r&&(f[ot]=l);const m=qt(E=>{if(g.length>0){let S=!1;for(const O of o.querySelectorAll(e)){if(S&&O.getAttribute(ot)!==l){o.insertBefore(E,O);return}O.getAttribute(ot)===l&&(S=!0)}o.appendChild(E)}else if(y){let S=!1;for(const O of y)if(O===E){S=!0;break}S||o.insertBefore(E,o.contains(y[0])?y[0]:o.querySelector(e)),y=void 0}},[l]),b=Kt(t.ref,E=>{var A;const S=g[0];if(n===2&&(E.innerHTML=""),(d||y)&&m(E),!a&&!i)return;let O=Se[A=E.getAttribute(S)]||(Se[A]=new Promise((q,K)=>{E.addEventListener("load",q),E.addEventListener("error",K)}));i&&(O=O.then(i)),a&&(O=O.catch(a)),O.catch(()=>{})});if(s&&u==="render"){const E=st[e][0];if(t[E]){const S=t[E],O=Se[S]||(Se[S]=new Promise((A,q)=>{m(h),h.addEventListener("load",A),h.addEventListener("error",q)}));cs(O)}}const w={tag:e,type:e,props:{...f,ref:b},ref:b};return w.p=n,h&&(w.e=h),is(w,o)},ds=e=>{const t=es(),n=t&&Ee(t);return n!=null&&n.endsWith("svg")?{tag:"title",props:e,type:"title",ref:e.ref}:tt("title",e,void 0,!1,!1)},ps=e=>!e||["src","async"].some(t=>!e[t])?{tag:"script",props:e,type:"script",ref:e.ref}:tt("script",e,1,!1,!0),ms=e=>!e||!["href","precedence"].every(t=>t in e)?{tag:"style",props:e,type:"style",ref:e.ref}:(e["data-href"]=e.href,delete e.href,tt("style",e,2,!0,!0)),gs=e=>!e||["onLoad","onError"].some(t=>t in e)||e.rel==="stylesheet"&&(!("precedence"in e)||"disabled"in e)?{tag:"link",props:e,type:"link",ref:e.ref}:tt("link",e,1,"precedence"in e,!0),vs=e=>tt("meta",e,void 0,!1,!1),Gn=Symbol(),ys=e=>{const{action:t,...n}=e;typeof t!="function"&&(n.action=t);const[r,s]=Ve([null,!1]),o=qt(async u=>{const f=u.isTrusted?t:u.detail[Gn];if(typeof f!="function")return;u.preventDefault();const h=new FormData(u.target);s([h,!0]);const d=f(h);d instanceof Promise&&(hs(d),await d),s([null,!0])},[]),i=Kt(e.ref,u=>(u.addEventListener("submit",o),()=>{u.removeEventListener("submit",o)})),[a,l]=r;return r[1]=!1,{tag:fs,props:{value:{pending:a!==null,data:a,method:a?"post":null,action:a?t:null},children:{tag:"form",props:{...n,ref:i},type:"form",ref:i}},f:l}},qn=(e,{formAction:t,...n})=>{if(typeof t=="function"){const r=qt(s=>{s.preventDefault(),s.currentTarget.form.dispatchEvent(new CustomEvent("submit",{detail:{[Gn]:t}}))},[]);n.ref=Kt(n.ref,s=>(s.addEventListener("click",r),()=>{s.removeEventListener("click",r)}))}return{tag:e,props:n,type:e,ref:n.ref}},bs=e=>qn("input",e),ws=e=>qn("button",e);Object.assign(Nt,{title:ds,script:ps,style:ms,link:gs,meta:vs,form:ys,input:bs,button:ws});new TextEncoder;var xs=zt(null),Es=(e,t,n,r)=>(s,o)=>{const i="<!DOCTYPE html>",a=n?Tt(u=>n(u,e),{Layout:t,...o},s):s,l=Ir`${B(i)}${Tt(xs.Provider,{value:e},a)}`;return e.html(l)},Ss=(e,t)=>function(r,s){const o=r.getLayout()??$e;return e&&r.setLayout(i=>e({...i,Layout:o},r)),r.setRenderer(Es(r,o,e)),s()};const Rs=Ss(({children:e})=>p("html",{lang:"en",children:[p("head",{children:[p("meta",{charset:"utf-8"}),p("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0"}),p("link",{href:"/favicon.ico",rel:"icon"}),p(zo,{href:"/app/style.css",rel:"stylesheet"}),p(Uo,{src:"/app/client.ts",async:!0})]}),p("body",{children:e})]})),Os=Object.freeze(Object.defineProperty({__proto__:null,default:Rs},Symbol.toStringTag,{value:"Module"}));function Kn(e){return[/github\.com\/[^\/]+\/[^\/]+/,/qiita\.com\/[^\/]+\/items/,/qiita\.com\/tags/,/zenn\.dev\/[^\/]+\/articles/,/zenn\.dev\/[^\/]+\/books/,/zenn\.dev\/topics/,/dev\.classmethod\.jp\/articles/,/speakerdeck\.com\/[^\/]+\/[^\/]+/,/x\.com\/[^\/]+\/status/,/x\.com\/search/,/docswell\.com\/slide/].some(r=>r.test(e))?!1:[/https?:\/\/dev\.classmethod\.jp\/author\/[a-zA-Z0-9_-]+$/,/https?:\/\/github\.com\/[a-zA-Z0-9_-]+$/,/https?:\/\/zenn\.dev\/[a-zA-Z0-9_-]+$/,/https?:\/\/speakerdeck\.com\/[a-zA-Z0-9_-]+$/,/https?:\/\/x\.com\/[a-zA-Z0-9_-]+$/,/https?:\/\/qiita\.com\/[a-zA-Z0-9_-]+$/,/https?:\/\/www\.docswell\.com\/user\/[a-zA-Z0-9_-]+$/].some(r=>r.test(e))}function Cs(e){const t=/\[([^\]]+)\]\(([^)]+)\)/g;let n;for(;(n=t.exec(e))!==null;){const r=n[2];if(Kn(r))return!0}return!1}function As(e,t){if(!Cs(e))return e;const n={"dev.classmethod.jp":{name:"DevelopersIO",logo:"amazonaws",color:"orange",usernameRegex:/dev\.classmethod\.jp\/author\/([^\/\s\)]+)/},"github.com":{name:"GitHub",logo:"github",color:"black",usernameRegex:/github\.com\/([^\/\s\)]+)/},"zenn.dev":{name:"Zenn",logo:"zenn",color:"blue",usernameRegex:/zenn\.dev\/([^\/\s\)]+)/},"speakerdeck.com":{name:"Speaker--Deck",logo:"speakerdeck",color:"green",usernameRegex:/speakerdeck\.com\/([^\/\s\)]+)/},"x.com":{name:"X",logo:"x",color:"black",usernameRegex:/x\.com\/([^\/\s\)]+)/},"qiita.com":{name:"Qiita",logo:"qiita",color:"brightgreen",usernameRegex:/qiita\.com\/([^\/\s\)]+)/},"www.docswell.com":{name:"Docswell",logo:"readthedocs",color:"blue",usernameRegex:/www\.docswell\.com\/user\/([^\/\s\)]+)/}};let r=e;return Object.entries(n).forEach(([s,o])=>{const i=new RegExp(`\\[([^\\]]+)\\]\\(https?://${s.replace(/\./g,"\\.")}[^\\)]*\\)`,"g");r=r.replace(i,a=>{try{const l=a.match(/\[([^\]]+)\]\(([^)]+)\)/);if(!l)return a;const u=l[2];if(!Kn(u))return a;const f=a.match(o.usernameRegex),h=f?f[1]:"";if(h){const d=encodeURIComponent(`${o.name}-@${h}`),g=encodeURIComponent(o.logo),y=encodeURIComponent(o.color),m=`https://img.shields.io/badge/${d}-${y}?style=flat&logo=${g}`;return`<a href="${u}" target="_blank" rel="noopener"><img src="${m}" alt="${o.name}" /></a>`}else{const d=encodeURIComponent(o.name),g=encodeURIComponent(o.logo),y=encodeURIComponent(o.color),m=`https://img.shields.io/badge/${d}-${y}?style=flat&logo=${g}`;return`<a href="${u}" target="_blank" rel="noopener"><img src="${m}" alt="${o.name}" /></a>`}}catch(l){return console.warn("Error converting account link:",l),a}})}),r}const ks="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 border border-blue-200 shadow-sm hover:bg-blue-200 transition-colors duration-200",Ct=/^\d+\.\s/;function Ps(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function hn(e,t){return`<li class="ml-4 mb-2 flex items-start"><span class="mr-2 text-blue-500">${t}</span><span>${Le(e)}</span></li>`}function Xn(e){return e.replace(/\*\*([^*]+)\*\*/g,'<strong class="font-bold">$1</strong>').replace(new RegExp("(?<!\\*)\\*([^*]+)\\*(?!\\*)","g"),'<em class="italic">$1</em>').replace(/`([^`]+)`/g,`<code class="${ks}">$1</code>`)}function Le(e){return Xn(e.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" class="text-blue-600 hover:underline" target="_blank" rel="noopener">$1</a>'))}function _s(e){var s;const t=e.trim().split(`
`);let n="",r=0;for(;r<t.length;){const o=t[r].trim();if(o==="---"){n+='<hr class="my-6 border-t border-gray-200">',r++;continue}if(o.startsWith("```")){let i="";for(r++;r<t.length;){const l=t[r];if(l.trim()==="```"||l.trim().startsWith("```"))break;i+=l+`
`,r++}const a=Ps(i.trim());n+=`<div class="my-6 bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden"><pre class="p-4 overflow-x-auto bg-gray-50"><code class="text-sm text-gray-800 font-mono leading-6 whitespace-pre-wrap">${a}</code></pre></div>`,r<t.length&&r++;continue}if(o.startsWith("> ")){let i="";for(;r<t.length&&t[r].trim().startsWith("> ");)i+=t[r].trim().substring(2)+" ",r++;n+=`<blockquote class="my-4 pl-4 border-l-4 border-blue-500 bg-blue-50 py-3 pr-4 rounded-r-lg"><p class="text-gray-700 italic">${Le(i.trim())}</p></blockquote>`;continue}if(Ct.test(o)){let i=1;for(;r<t.length&&Ct.test(t[r].trim());){const a=t[r].trim().replace(Ct,"");n+=hn(a,`${i}.`),i++,r++}continue}if(o.startsWith("- ")){const i=o.substring(2);n+=hn(i,"•"),r++;continue}if(o.includes("|")&&((s=t[r+1])!=null&&s.includes("---"))){const i=o.split("|").map(a=>a.trim()).filter(a=>a);if(t[r+1].includes("---")){for(n+='<div class="overflow-x-auto my-4"><table class="min-w-full bg-white border border-gray-200 rounded-lg shadow-sm"><thead class="bg-gray-50"><tr>',i.forEach(a=>{n+=`<th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider border-b border-gray-200">${Le(a)}</th>`}),n+='</tr></thead><tbody class="divide-y divide-gray-200">',r+=2;r<t.length&&t[r].trim().includes("|");){const a=t[r].trim().split("|").map(l=>l.trim()).filter(l=>l);a.length>0&&(n+='<tr class="hover:bg-gray-50">',a.forEach(l=>{n+=`<td class="px-4 py-3 text-sm text-gray-900 border-b border-gray-200">${Le(l)}</td>`}),n+="</tr>"),r++}n+="</tbody></table></div>";continue}}if(o.match(/^!\[([^\]]*)\]\(([^)]+)\)/)){const i=o.match(/^!\[([^\]]*)\]\(([^)]+)\)/);if(i){const a=i[1],l=i[2],u=l.startsWith("./")?l.substring(2):l;if(n+=`<div class="my-6"><img src="/${u}" alt="${a}" class="w-full max-w-2xl mx-auto rounded-lg shadow-lg" style="height: auto;" loading="lazy"></div>`,r+1<t.length&&t[r+1].trim().startsWith("*")&&t[r+1].trim().endsWith("*")){r++;const f=t[r].trim().replace(/^\*/,"").replace(/\*$/,"");n+=`<p class="text-center text-sm text-gray-600 italic mt-2 mb-4">${f}</p>`}r++;continue}}o?n+=Le(o)+"<br>":n+="<br>",r++}return n}function $s(e){const t=/- \[([^\]]+)\]\((https:\/\/(?:speakerdeck\.com\/player\/|www\.docswell\.com\/slide\/[^/]+\/embed?)[^)]+)\)/g;return e.replace(t,(n,r,s)=>{let o=r,i="";return s.includes("speakerdeck.com")?(o=r.replace(/\s*\\?\s*-\s*Speaker\s*Deck\s*$/i,""),i="speakerdeck-iframe"):s.includes("docswell.com")&&(o=r.replace(/\s*\|\s*ドクセル\s*$/i,""),i="docswell-iframe"),`<iframe class="${i}" frameborder="0" src="${s}" title="${o}" allowfullscreen="true" style="border: 0px; background: padding-box padding-box rgba(0, 0, 0, 0.1); margin: 0px; padding: 0px; border-radius: 6px; box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 40px; width: 100%; height: auto; aspect-ratio: 560 / 315;" data-ratio="1.7777777777777777"></iframe>`})}function js(e){const t=/- \[([^\]]+)\]\((https:\/\/www\.youtube\.com\/embed\/[^\)]+)\)/g,n=/\[([^\]]+)\]\((https:\/\/www\.youtube\.com\/embed\/[^\)]+)\)/g,r="width: 100%; height: auto; aspect-ratio: 560 / 315; border: 0px; background: padding-box padding-box rgba(0, 0, 0, 0.1); margin: 0px; padding: 0px; border-radius: 6px; box-shadow: rgba(0, 0, 0, 0.2) 0px 5px 40px;";let s=e.replace(t,(o,i,a)=>`<iframe style="${r}" src="${a}" title="${i}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>`);return s=s.replace(n,(o,i,a)=>`<iframe style="${r}" src="${a}" title="${i}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen></iframe>`),s}function Ns(e){const t=/- \[([^\]]+)\]\((https:\/\/(?:dev\.classmethod\.jp\/articles\/[^)]+|qiita\.com\/[^\/]+\/items\/[^)]+|zenn\.dev\/[^\/]+\/articles\/[^)]+))\)/g;return e.replace(t,(n,r,s)=>`<iframe class="hatenablogcard" style="width:100%;height:155px;" title="${r}" src="https://hatenablog-parts.com/embed?url=${encodeURIComponent(s)}" width="300" height="150" frameborder="0" scrolling="no"></iframe>`)}function Ts(e){const t=e.split(`
`),n=[];let r=null,s=0;for(const o of t){const i=o.match(/^(#+)\s+(.+)/);if(i){r&&n.push(r);const a=i[1].length;let l=i[2];l=l.replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" class="text-blue-600 hover:underline" target="_blank" rel="noopener">$1</a>'),r={title:l,content:"",level:a,id:`section-${++s}`}}else r?r.content+=o+`
`:n.length===0&&(r={title:"",content:o+`
`,level:0,id:"intro"})}return r&&n.push(r),n}function Te(e,t){if(!e.trim())return"";let n=js(e);return n=$s(n),n=Ns(n),n=As(n),n=_s(n),Xn(n)}const Ms="component-name",Ds="component-export",Is="data-serialized-props",Ls="data-hono-template",fe="__importing_islands",It=Symbol(),Lt=Symbol(),At=zt({[It]:!1,[Lt]:!1}),Zn=e=>Array.isArray(e)?e.some(Zn):typeof e=="object"&&Jr(e),Xt=({componentName:e,componentExport:t,Component:n,props:r})=>{const s={},o={};for(const a in r){const l=r[a];Zn(l)?s[a]=l:o[a]=l}const i=Ee(At);return i[Lt]||!i[It]?p("honox-island",{[Ms]:e,[Ds]:t||void 0,[Is]:JSON.stringify(o),children:[p(At.Provider,{value:{...i,[It]:!0},children:p(n,{...r})}),Object.entries(s).map(([a,l])=>Tt("template",{[Ls]:a,key:a},p(At.Provider,{value:{...i,[Lt]:!0},children:l})))]}):p(n,{...r})},Jn=({title:e,level:t,className:n})=>{const s=`${(o=>{switch(o){case 2:return"text-2xl font-bold text-gray-800";case 3:return"text-xl font-semibold text-blue-900";case 4:return"text-lg font-semibold text-gray-800";default:return"text-3xl font-bold text-gray-900"}})(t)} ${n||""}`;return p("h2",{className:s,dangerouslySetInnerHTML:{__html:e}})},Hs=({title:e,level:t,isOpen:n,onClick:r})=>p("button",{onClick:r,className:"flex items-center gap-3 w-full text-left p-4 hover:bg-gray-50 transition-colors rounded-lg",children:[p("span",{className:`transform transition-transform text-gray-500 ${n?"rotate-90":""}`,children:"▶"}),p(Jn,{title:e,level:t})]}),Fs=function({title:e,content:t,level:n,defaultOpen:r=!1}){const[s,o]=Ve(r);return n!==4?p("div",{className:"mb-6",children:[p(Jn,{title:e,level:n,className:"mb-4"}),p("div",{className:"prose max-w-none",dangerouslySetInnerHTML:{__html:Te(t)}})]}):p("div",{className:"mb-6 border border-gray-200 rounded-lg",children:[p(Hs,{title:e,level:n,isOpen:s,onClick:()=>o(!s)}),s&&p("div",{className:"px-4 pb-4 border-t border-gray-100",children:p("div",{className:"prose max-w-none pt-3",dangerouslySetInnerHTML:{__html:Te(t)}})})]})},Bs=function(e){return p(Xt,{componentName:"/app/islands/CollapsibleSection.tsx",Component:Fs,props:e})},Us=e=>{const[t,n]=Ve({}),[r,s]=Ve(!1);return un(()=>{const a={};e.forEach(l=>{a[l.id]=!1}),n(a)},[e]),un(()=>{const a=Object.values(t).filter(Boolean).length;s(a===e.length&&e.length>0)},[t,e.length]),{toggleStates:t,allOpen:r,handleToggle:a=>{n(l=>({...l,[a]:!l[a]}))},handleBulkToggle:()=>{const a=!r,l={};e.forEach(u=>{l[u.id]=a}),n(l),s(a)}}},zs=({allOpen:e,onClick:t})=>p("button",{onClick:t,className:`px-3 py-1 text-sm rounded-md transition-colors flex items-center gap-2 ${e?"bg-red-100 hover:bg-red-200 text-red-700":"bg-blue-100 hover:bg-blue-200 text-blue-700"}`,children:[p("span",{className:"text-xs",children:e?"全て閉じる":"全て開く"}),p("span",{className:`transform transition-transform ${e?"rotate-180":""}`,children:"▼"})]}),Ws=({title:e,hasSubsections:t,allOpen:n,onBulkToggle:r})=>p("div",{className:"flex items-center justify-between mb-4",children:[p("h3",{className:"text-xl font-semibold text-blue-900",dangerouslySetInnerHTML:{__html:e}}),t&&p(zs,{allOpen:n,onClick:r})]}),Vs=({subsection:e,isOpen:t,onToggle:n})=>p("div",{className:"mb-4 border border-gray-200 rounded-lg",children:[p("button",{onClick:n,className:"flex items-center gap-3 w-full text-left p-4 hover:bg-gray-50 transition-colors rounded-lg",children:[p("span",{className:`transform transition-transform text-gray-500 ${t?"rotate-90":""}`,children:"▶"}),p("span",{className:"text-lg font-semibold text-gray-800",dangerouslySetInnerHTML:{__html:e.title}})]}),t&&p("div",{className:"px-4 pb-4 border-t border-gray-100",children:p("div",{className:"prose max-w-none pt-3",dangerouslySetInnerHTML:{__html:Te(e.content,e.title)}})})]}),Gs=function({section:e,subsections:t}){const{toggleStates:n,allOpen:r,handleToggle:s,handleBulkToggle:o}=Us(t);return p("div",{className:"mb-8",children:[p(Ws,{title:e.title,hasSubsections:t.length>0,allOpen:r,onBulkToggle:o}),e.content.trim()&&p("div",{className:"prose max-w-none mb-6",dangerouslySetInnerHTML:{__html:Te(e.content,e.title)}}),t.map(i=>p(Vs,{subsection:i,isOpen:n[i.id]||!1,onToggle:()=>s(i.id)},i.id))]})},qs=function(e){return p(Xt,{componentName:"/app/islands/SectionGroup.tsx",Component:Gs,props:e})},Ks=()=>p("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[p("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),p("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),Xs=()=>p("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:p("path",{d:"M3 3h18v18H3V3zm16 16V5H5v14h14zM7 7h10v2H7V7zm0 4h10v2H7v-2zm0 4h7v2H7v-2z"})}),Zs=()=>p("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 24 24",children:p("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})}),dn=({type:e,isLoading:t,onClick:n})=>{const r=e==="pdf";return p("button",{onClick:n,disabled:t,className:`flex items-center justify-center gap-2 px-6 py-3 text-white font-medium rounded-lg shadow-md transition-colors duration-200 w-[280px] ${r?"bg-orange-500 hover:bg-orange-600 disabled:bg-orange-300":"bg-slate-500 hover:bg-slate-600 disabled:bg-slate-300"}`,children:t?p($e,{children:[p(Ks,{}),p("span",{children:"ダウンロード中..."})]}):p($e,{children:[r?p(Zs,{}):p(Xs,{}),p("span",{children:r?"PDFをダウンロード":"Markdownをダウンロード"})]})})},Js=function(){const[e,t]=Ve(null),n=async r=>{t(r);try{const s=r==="markdown"?"README.md":"README.pdf",o=`/resume/${s}`,i=document.createElement("a");i.href=o,i.download=s,document.body.appendChild(i),i.click(),document.body.removeChild(i)}catch(s){console.error("Download failed:",s)}finally{t(null)}};return p("div",{className:"flex flex-col sm:flex-row gap-3 items-center justify-center mb-8",children:[p(dn,{type:"markdown",isLoading:e==="markdown",onClick:()=>n("markdown")}),p(dn,{type:"pdf",isLoading:e==="pdf",onClick:()=>n("pdf")})]})},Qs=function(e){return p(Xt,{componentName:"/app/islands/DownloadSection.tsx",Component:Js,props:e})},Ys=`# 小森 清之郎（燻丸 / ibushi_maru）

## 基本情報

### プロフィール

|項目|値|
|---|---|
|氏名|小森 清之郎（こもり せいしろう）|
|ハンドルネーム|燻丸（ibushi_maru）|
|生年月日|1999年8月12日|
|最終学歴|サレジオ工業高等専門学校 機械工学科卒業|
|現在の状況|機械設計エンジニアとして勤務 (翻訳者としてフリーランスに転身を予定) |
|志望職種|AIエンジニア（ゲーム翻訳特化）|

### アカウント

- [X (Twitter)](https://x.com/ibushi_maru)
- [ゲーム翻訳会LEVELUP!](https://x.com/LEVELUP_GameTra)
- [SpeakerDeck](https://speakerdeck.com/ibushimaru)
- [GitHub](https://github.com/ibushimaru)
- [note](https://note.com/ibushi_maru)
- [はてなブログ](https://ibushi-maru.hatenablog.com/)

### ミッション

> **「この世の全てのゲームを日本語で遊べるようにしたい」**

工業高等専門学校時代から有志でゲーム翻訳に6年間携わり、2作品で公式採用を獲得。現在はMac mini (2024) を用いてローカルLLMを用いた翻訳環境を構築し、ローカライゼーションの高度化を目指している。
また、ゲーム翻訳に携わる人どうしの交流を増やし、情報交換を活発化することを目的として複数のコミュニティを運営している。

##  個人プロジェクト・業務外活動（アピールポイント）

6年間のゲーム翻訳活動を通じて、複数の作品の翻訳実績を持ち、**2作品で公式採用**を獲得しました。

### ゲーム翻訳プロジェクト実績（時系列）

#### 2020年 - Risk of Rain 日本語化プロジェクト (有志翻訳)

**プロジェクト概要**
- **期間**: 2020年4月〜11月
- **成果**: 日本語化パッチ完成・一般公開
- **チーム規模**: **16名のボランティア翻訳者を統括**
- **配布方法**: Google Driveでの無料配布、実行ファイル形式で簡単インストール可能
- **詳細記事**: [Risk of Rain 日本語化完成報告](https://ibushi-maru.hatenablog.com/entry/2020/11/23/232353)

**プロジェクト管理実績**
- 大規模翻訳チームの役割分担最適化（ゲーム解析・翻訳・コミュニティサポート）
- 複数人による翻訳の品質統一システム構築
- 最終的な配布パッケージの作成・管理

**技術的アプローチ**
- **ツール使用**: Undertalemodtoolを使用したゲームファイルのリバースエンジニアリングおよび改変
- **フォント対応**: フォント置換技術の実装

**チームメンバー**: tongaeru、くれす、kengo700を含む16名の協力者

#### 2020-2021年 - Nuclear Throne 日本語化プロジェクト

**プロジェクト概要**
- **成果物**: 日本語ローカライゼーションMODの作成・公開
- **配布**: 翻訳ファイルをコミュニティ向けに無料公開
- **言語ペア**: 英語→日本語
- **詳細記事**: [Nuclear Throne 日本語化MOD配布](https://note.com/ibushi_maru/n/n9264fd728323)

#### 2021年7月 - Unworthy 日本語化プロジェクト

**プロジェクト概要**
- **ゲームジャンル**: Soul-like Metroidvania
- **作業規模**: **600-700行規模**の翻訳プロジェクト
- **技術要件**: GameMaker:Studio エンジンでの実装
- **組織運営**: Discord「日本語化作業所互助会」での募集・管理
- **詳細記事**: [Unworthy 日本語化プロジェクト](https://ibushi-maru.hatenablog.com/entry/2021/07/31/181622)

#### 🏆 2021年12月〜2022年3月 - Vault of the Void プロジェクト【公式採用】

**プロジェクト規模・詳細**
- **翻訳語数**: **40,000語以上**の大規模翻訳プロジェクト
- **開発エンジン**: GameMaker Studio 2（日本語対応の技術的課題を解決）
- **公式リリース日**: 2022年3月4日に正式日本語対応実装
- **プロジェクト期間**: 2021年12月開始からリリースまで約3ヶ月
- **詳細記事**: [Vault of the Void 日本語化裏話](https://note.com/ibushi_maru/n/n404cfc89edc5)

**チーム構成・役割分担**
- **プロジェクトリーダー**: 燻丸（統括・技術担当）
- **翻訳チーム**: shinya、AgeBdeR、ÁTALOSS（計4名体制）
- **品質管理**: 約200語の専門用語集を作成し、翻訳統一性を確保
- **検証作業**: **約500時間越えのプレイ時間のうち、訳300時間をLQA等の検証作業に投入**

**技術的成果・課題解決**
- **翻訳プラットフォーム**: Crowdin を使用した協働翻訳
- **機械翻訳活用**: SpredSheetにGASを組み込み、Google Translate を初期下訳として活用、そのご人間が文脈・ニュアンス・分書き調整
- **UI制約対応**: カードテキストの改行防止、限られた文字スペースへの適応

**開発者との連携**
- **直接協力**: 開発者Josh Bruce氏がゲームテキストをJSON形式で抽出・提供
- **正式許可**: 開発者ブログ翻訳についても正式許可を取得
- **継続関係**: リリース後も開発ブログの継続翻訳（アップデート#41、#42、#44等）
- **対面交流**: 2025年4月、Josh氏の来日時に上野を案内し、継続的な関係を構築

![Josh氏との上野観光](./image.png)
*開発者Josh Bruce氏の来日時（2025年4月、上野にて）*

**市場への影響・成果**
- **売上貢献**: 開発者Josh氏によると、日本語化後に日本からの売上が最初に大きく跳ね上がった
- **メディア注目**: AUTOMATON、Game*Spark で特集記事・インタビュー掲載理

#### 🏆 Wuppo 日本語化プロジェクト【公式採用】

**実績の重要性**
- **公式採用**: 開発者による正式採用
- **商業レベル品質**: 外部に翻訳の校正を依頼し、プロフェッショナルな翻訳品質を証明

### コミュニティ運営・組織活動

#### Discord「日本語化作業所互助会」　一般参加

- **機能**: 翻訳者募集、プロジェクト管理、情報共有の場
- **活動内容**: 別プロジェクトの翻訳サポートや、ソースコード解析を引き受ける。

#### ゲーム翻訳会LEVELUP! 共同主催

- **機能**: 毎月一回、ゲーム翻訳に関する勉強会・イベント運営
- **活動内容**: 毎月の案だし、コミュニティ運営、Xアカウントの管理、発表資料作成

#### TGSゲーム翻訳者名刺交換会主催

- **機能** 毎年TGS（東京ゲームショウ）のビジネスデイにおいて、ゲームを翻訳する人どうしが交流できる機会を提供
- **活動内容** 名刺交換会、交流会主催

#### AIエージェントユーザー会 運営メンバー

- **機能**: 生成AIを扱うユーザーたちが集まり情報共有を行う。
- **活動内容**: 生成AI関連のイベントの企画や、コミュニティ運営を担当。


### 技術発表・知識共有活動

#### SpeakerDeck プレゼンテーション

以下のテーマで技術発表を実施し、知識の体系化と共有を推進：

- [ゲームフォントの世界](https://speakerdeck.com/ibushimaru/gemuhuontonoshi-jie)
  - フォント技術（アウトライン vs ビットマップ vs ドット）
  - CJK文字問題への対応
  - アクセシビリティ対応（UDフォント、障害者差別解消法対応）

- [有志翻訳の世界](https://speakerdeck.com/ibushimaru/you-zhi-fan-yi-noshi-jie)
  - 有志翻訳の哲学と価値観
  - プロジェクト管理手法
  - コミュニティ運営ノウハウ

- [今からしろう、生成AI](https://speakerdeck.com/ibushimaru/jin-karazhi-rou-sheng-cheng-ai)
  - 生成AI技術への取り組み
  - ゲーム翻訳分野への応用可能性

#### ブログ・記事執筆

**note記事**: 翻訳プロジェクトの詳細記録、技術情報の共有
- [Vault of the Void 日本語化裏話](https://note.com/ibushi_maru/n/n404cfc89edc5)
- [Nuclear Throne 日本語化MOD配布](https://note.com/ibushi_maru/n/n9264fd728323)
- [有志翻訳とポストエディット](https://note.com/ibushi_maru/n/n313bd89ab941)
- [noteマガジン - ゲーム翻訳関連記事集](https://note.com/ibushi_maru/m/m383dc84c979d)

**はてなブログ**: 過去の翻訳活動記録、プロジェクト管理ノウハウ
- [Risk of Rain 日本語化完成報告](https://ibushi-maru.hatenablog.com/entry/2020/11/23/232353)
- [Unworthy 日本語化プロジェクト](https://ibushi-maru.hatenablog.com/entry/2021/07/31/181622)
- [One Step from Eden MOD制作記](https://ibushi-maru.hatenablog.com/entry/2020/08/01/000134)
- [翻訳を通じた開発者との関係構築](https://ibushi-maru.hatenablog.com/entry/2020/04/17/015228)
- [有志翻訳の始め方](https://ibushi-maru.hatenablog.com/entry/2019/04/24/094502)
- [翻訳コミュニティの重要性](https://ibushi-maru.hatenablog.com/entry/2019/03/02/071344)

## 職務経歴

### JFEプラントエンジ株式会社

**事業内容**: 工場設備の建設や機械のメンテナンス、発電設備の補修工事  
**資本金**: 17億円 売上高: 1,702億1,500万円（2024年3月期） 従業員数: 3905名  
**雇用形態**: 正社員  
**職種**: プラントエンジニア（総合職）
**期間**: （2020年4月〜2023年10月）

#### 主な業務内容

**補修工事の計画立案と顧客折衝**
- 現地調査による顧客ニーズ・課題のヒアリング
- 工事方法の提案と見積もり作成
- 補修加工用専用工作機械の設計・製作
- 安全書類の作成（安全要領書、施工要領書）
- 工事部隊の派遣と現場監督業務

#### IT技術を利用した業務改善（DX）プロジェクトの兼任

入社2年目より全社規模の業務改善プロジェクト（IT技術部会）にコアメンバーとして参画：

- アナログ測定工具のデジタル化推進
- 3次元測定機の導入・活用
- RPAツールを利用した事務作業効率化推進
- 3ヶ月に一度の部会での成果報告、IT技術の全社展開推進

### 株式会社ビッグツリーテクノロジー＆コンサルティング

**事業内容**: DX戦略の立案やITシステムの構築やコンサルティングサービスを提供  
**資本金**: 4億8,179万円 売上高: 98億7,800万円（2023年12月期） 従業員数: 571名  
**雇用形態**: 正社員  
**職種**: ITコンサルタント（RPA事業部）
**期間**: （2023年11月〜2024年7月）

#### 主な業務内容

**RPAツール導入と開発による業務効率化支援**
- RPAツール（Power Automate、UiPath、VBA）を用いた自動化ツールの開発、テスト、実装
- 顧客業務プロセスの分析と改善提案
- RPAツール導入後の運用支援とドキュメント作成

### 職業訓練校（2024年8月〜2025年2月）

**訓練内容**: 機械設計・CAD技術の習得
- 最新のJIS規格に基づく製図知識
- 3D-CAD（SOLIDWORKS、Autodesk Fusion）の実務レベル習得
- 機械設計の基礎理論と実践

### 無職期間の技術習得（2025年2月〜2025年5月）

**自己研鑽期間**
- Claude Codeを用いたVibe Codingの習得
- Google Chrome拡張機能の開発と公開
- Difyを用いたAIアプリケーション開発の学習
- MCP（Model Context Protocol）の研究と実装

### 熱技術開発株式会社（2025年5月〜現在）

**職種**: 機械設計エンジニア
**主な業務**:
- 産業機械の設計・開発
- 生成AI技術の社内導入推進
- 業務効率化ツールの開発と実装

**今後の計画**: ゲーム翻訳者として独立し、フリーランスとして活動予定

## 技術スキル

### ゲーム翻訳・ローカライゼーション技術

\`実作業で使用した技術のみ列挙\`

#### CATツール（Computer-Assisted Translation）
- \`Google Spreadsheets\` - 協働翻訳プロジェクト管理やGASを用いたプログラミング（6年使用）
- \`Crowdin\` - クラウド翻訳プラットフォーム（40,000語規模の実運用）
- \`OmegaT\` - オープンソースCATツール

#### ゲーム開発・モディング技術
- \`GameMaker Studio\` - 複数プロジェクトでの日本語パッチ実装実績
- \`Undertalemodtool\` - GameMaker:Studio系ゲームの改変ツール
- \`Steam Workshop\` - MOD配布・管理システムの活用
- \`Aseprite\` - ピクセルアート・スプライト制作ツール

### エンジニアリング技術

#### CAD・設計ツール
- \`AutoCAD\` - 7年（高専3年 + 業務3年6ヶ月 + 職業訓練校6ヶ月）
- \`Inventor\` \`SOLIDWORKS\` \`Autodesk Fusion\` - 3D設計・構造解析（7年）

#### 業務自動化・RPA
- \`Power Automate\` \`UiPath\` \`VBA\` - 業務効率化ツールの開発（2年）
- \`Excel\` \`Word\` \`PowerPoint\` - マクロ作成・文書作成（9年）

#### プログラミングスキル
- Claude Codeを用いたVive Coding

#### AI・機械学習
- Dify、MCP、RAG

## 保有資格・称号

### 資格

|資格名|取得日|
|---|---|
|普通自動車第一種運転免許|日付|
|電気工事士2種|日付|
|アマチュア無線技士|日付|

### 実績・称号

|実績|達成日|
|---|---|
|Vault of the Void 公式日本語化採用|2022年3月|
|Wuppo 公式日本語化採用|公式採用済み|
|[Game*Spark インタビュー掲載](https://www.gamespark.jp/article/2022/04/10/117645.html)|2022年|
|[AUTOMATON 特集記事掲載](https://automaton-media.com/articles/newsjp/20220304-194310/)|2022年|

## 🎯 私が提供できる独自価値

### 1. ゲーム翻訳・ローカライゼーションの専門性

#### 6年間の実績と品質基準
- **公式採用2作品**による商業レベルの品質基準保有
- 40,000語規模のプロジェクトを3ヶ月で完遂した実行力
- 翻訳エラーがゲーム体験に与える影響の深い理解
- ジャンル別（Soul-like、ローグライク等）の翻訳ノウハウ

#### AI翻訳との協働経験
- Google Translate、DeepLを活用した効率的なワークフロー構築
- 機械翻訳の限界と人間による文脈調整の重要性を理解
- LLMを活用した翻訳品質向上への実践的アプローチ

### 2. コミュニティ運営とネットワーク力

#### 翻訳者コミュニティの構築・運営
- **16名規模のチーム統括**による大規模プロジェクト管理経験
- ゲーム翻訳会LEVELUP!共同主催（毎月開催）
- TGSゲーム翻訳者名刺交換会主催（年次イベント）
- Discord「日本語化作業所互助会」での協働環境構築

#### 開発者・業界との関係構築
- インディーゲーム開発者との直接交渉・協働実績
- Game*Spark、AUTOMATONなどメディアとの関係
- β版テスト・品質評価のための人材ネットワーク

### 3. 技術と創造性の融合

#### 生成AI活用への先進的取り組み
- Claude Codeを用いたVibe Codingの実践
- Difyによるワークフロー自動化
- MCP（Model Context Protocol）の研究と実装
- ローカルLLMを活用した翻訳環境の構築

#### 機械設計×IT×翻訳の複合スキル
- CAD設計（7年）とRPA開発（2年）の実務経験
- 業務効率化・自動化への体系的アプローチ
- エンジニアリング思考による問題解決能力

### 4. 即戦力として貢献できる領域

#### 翻訳・ローカライゼーション分野
- 翻訳品質評価システムの構築・改善
- ゲーム特化コーパス・用語集の整備
- 翻訳者向け教育・トレーニングプログラムの開発

#### プロジェクト管理・組織開発
- 多言語・多文化チームのマネジメント
- コミュニティ駆動型の品質改善プロセス構築
- アジャイル開発手法の翻訳プロジェクトへの適用

#### ビジネス開発・市場開拓
- インディーゲーム市場への参入戦略立案
- 翻訳サービスの価格設定・収益モデル設計
- グローバル展開時の品質基準策定



## 最後に

私は「この世の全てのゲームを日本語で遊べるようにしたい」という理念のもと、6年間ゲーム翻訳に携わってきました。

有志翻訳から始まり、公式採用を獲得し、コミュニティを運営し、生成AIとの協働を模索してきた経験は、翻訳業界が大きく変革する今だからこそ活きると確信しています。

機械翻訳やAIが進化する時代においても、文化の橋渡しとなる翻訳には人間の創造性と情熱が不可欠です。私は技術と人間性を融合させ、より多くの人々が言語の壁を越えてコンテンツを楽しめる世界の実現に貢献したいと考えています。

---

**連絡先**: [ibushimaru@veriscio.com]  
**最終更新**: 2025年8月10日`;function eo(){const e=Ts(Ys),n=(r=>{const s=[];let o=null,i=[];return r.forEach(a=>{!a.title&&a.level===0?s.push({type:"intro",section:a}):a.level===1||a.level===2?(o&&(s.push({type:"h3-group",section:o,subsections:i}),o=null,i=[]),s.push({type:"regular",section:a})):a.level===3?(o&&s.push({type:"h3-group",section:o,subsections:i}),o=a,i=[]):a.level===4&&o?i.push(a):(o&&(s.push({type:"h3-group",section:o,subsections:i}),o=null,i=[]),s.push({type:"regular",section:a}))}),o&&s.push({type:"h3-group",section:o,subsections:i}),s})(e);return p("div",{className:"min-h-screen bg-gray-50",children:p("div",{className:"max-w-4xl mx-auto py-8 px-4",children:[p("header",{className:"text-center mb-12",children:[p("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"職務経歴書"}),p(Qs,{})]}),p("main",{className:"bg-white rounded-lg shadow-lg p-8",children:n.map((r,s)=>{if(r.type==="intro")return p("div",{className:"mb-8",dangerouslySetInnerHTML:{__html:`<p class="mb-4">${Te(r.section.content)}</p>`}},r.section.id);if(r.type==="h3-group")return p(qs,{section:r.section,subsections:r.subsections||[]},r.section.id);{const o=Te(r.section.content);return p(Bs,{title:r.section.title,content:o,level:r.section.level,defaultOpen:r.section.level<=2},r.section.id)}})}),p("footer",{className:"text-center mt-12 text-gray-500",children:p("p",{children:"Built with HonoX on GitHub Pages"})})]})})}const to=!0,no=Object.freeze(Object.defineProperty({__proto__:null,__importing_islands:to,default:eo},Symbol.toStringTag,{value:"Module"}));var pn=(e,t,n)=>(r,s)=>{let o=-1;return i(0);async function i(a){if(a<=o)throw new Error("next() called multiple times");o=a;let l,u=!1,f;if(e[a]?(f=e[a][0][0],r.req.routeIndex=a):f=a===e.length&&s||void 0,f)try{l=await f(r,()=>i(a+1))}catch(h){if(h instanceof Error&&t)r.error=h,l=await t(h,r),u=!0;else throw h}else r.finalized===!1&&n&&(l=await n(r));return l&&(r.finalized===!1||u)&&(r.res=l),r}},ro=async(e,t=Object.create(null))=>{const{all:n=!1,dot:r=!1}=t,o=(e instanceof sr?e.raw.headers:e.headers).get("Content-Type");return o!=null&&o.startsWith("multipart/form-data")||o!=null&&o.startsWith("application/x-www-form-urlencoded")?so(e,{all:n,dot:r}):{}};async function so(e,t){const n=await e.formData();return n?oo(n,t):{}}function oo(e,t){const n=Object.create(null);return e.forEach((r,s)=>{t.all||s.endsWith("[]")?io(n,s,r):n[s]=r}),t.dot&&Object.entries(n).forEach(([r,s])=>{r.includes(".")&&(ao(n,r,s),delete n[r])}),n}var io=(e,t,n)=>{e[t]!==void 0?Array.isArray(e[t])?e[t].push(n):e[t]=[e[t],n]:e[t]=n},ao=(e,t,n)=>{let r=e;const s=t.split(".");s.forEach((o,i)=>{i===s.length-1?r[o]=n:((!r[o]||typeof r[o]!="object"||Array.isArray(r[o])||r[o]instanceof File)&&(r[o]=Object.create(null)),r=r[o])})},Qn=e=>{const t=e.split("/");return t[0]===""&&t.shift(),t},lo=e=>{const{groups:t,path:n}=co(e),r=Qn(n);return uo(r,t)},co=e=>{const t=[];return e=e.replace(/\{[^}]+\}/g,(n,r)=>{const s=`@${r}`;return t.push([s,n]),s}),{groups:t,path:e}},uo=(e,t)=>{for(let n=t.length-1;n>=0;n--){const[r]=t[n];for(let s=e.length-1;s>=0;s--)if(e[s].includes(r)){e[s]=e[s].replace(r,t[n][1]);break}}return e},rt={},mn=(e,t)=>{if(e==="*")return"*";const n=e.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);if(n){const r=`${e}#${t}`;return rt[r]||(n[2]?rt[r]=t&&t[0]!==":"&&t[0]!=="*"?[r,n[1],new RegExp(`^${n[2]}(?=/${t})`)]:[e,n[1],new RegExp(`^${n[2]}$`)]:rt[r]=[e,n[1],!0]),rt[r]}return null},Yn=(e,t)=>{try{return t(e)}catch{return e.replace(/(?:%[0-9A-Fa-f]{2})+/g,n=>{try{return t(n)}catch{return n}})}},fo=e=>Yn(e,decodeURI),er=e=>{const t=e.url,n=t.indexOf("/",8);let r=n;for(;r<t.length;r++){const s=t.charCodeAt(r);if(s===37){const o=t.indexOf("?",r),i=t.slice(n,o===-1?void 0:o);return fo(i.includes("%25")?i.replace(/%25/g,"%2525"):i)}else if(s===63)break}return t.slice(n,r)},ho=e=>{const t=er(e);return t.length>1&&t.at(-1)==="/"?t.slice(0,-1):t},Oe=(e,t,...n)=>(n.length&&(t=Oe(t,...n)),`${(e==null?void 0:e[0])==="/"?"":"/"}${e}${t==="/"?"":`${(e==null?void 0:e.at(-1))==="/"?"":"/"}${(t==null?void 0:t[0])==="/"?t.slice(1):t}`}`),tr=e=>{if(e.charCodeAt(e.length-1)!==63||!e.includes(":"))return null;const t=e.split("/"),n=[];let r="";return t.forEach(s=>{if(s!==""&&!/\:/.test(s))r+="/"+s;else if(/\:/.test(s))if(/\?/.test(s)){n.length===0&&r===""?n.push("/"):n.push(r);const o=s.replace("?","");r+="/"+o,n.push(r)}else r+="/"+s}),n.filter((s,o,i)=>i.indexOf(s)===o)},kt=e=>/[%+]/.test(e)?(e.indexOf("+")!==-1&&(e=e.replace(/\+/g," ")),e.indexOf("%")!==-1?rr(e):e):e,nr=(e,t,n)=>{let r;if(!n&&t&&!/[%+]/.test(t)){let i=e.indexOf(`?${t}`,8);for(i===-1&&(i=e.indexOf(`&${t}`,8));i!==-1;){const a=e.charCodeAt(i+t.length+1);if(a===61){const l=i+t.length+2,u=e.indexOf("&",l);return kt(e.slice(l,u===-1?void 0:u))}else if(a==38||isNaN(a))return"";i=e.indexOf(`&${t}`,i+1)}if(r=/[%+]/.test(e),!r)return}const s={};r??(r=/[%+]/.test(e));let o=e.indexOf("?",8);for(;o!==-1;){const i=e.indexOf("&",o+1);let a=e.indexOf("=",o);a>i&&i!==-1&&(a=-1);let l=e.slice(o+1,a===-1?i===-1?void 0:i:a);if(r&&(l=kt(l)),o=i,l==="")continue;let u;a===-1?u="":(u=e.slice(a+1,i===-1?void 0:i),r&&(u=kt(u))),n?(s[l]&&Array.isArray(s[l])||(s[l]=[]),s[l].push(u)):s[l]??(s[l]=u)}return t?s[t]:s},po=nr,mo=(e,t)=>nr(e,t,!0),rr=decodeURIComponent,gn=e=>Yn(e,rr),Ce,U,ne,or,ir,Ht,oe,wn,sr=(wn=class{constructor(e,t="/",n=[[]]){R(this,ne);x(this,"raw");R(this,Ce);R(this,U);x(this,"routeIndex",0);x(this,"path");x(this,"bodyCache",{});R(this,oe,e=>{const{bodyCache:t,raw:n}=this,r=t[e];if(r)return r;const s=Object.keys(t)[0];return s?t[s].then(o=>(s==="json"&&(o=JSON.stringify(o)),new Response(o)[e]())):t[e]=n[e]()});this.raw=e,this.path=t,v(this,U,n),v(this,Ce,{})}param(e){return e?C(this,ne,or).call(this,e):C(this,ne,ir).call(this)}query(e){return po(this.url,e)}queries(e){return mo(this.url,e)}header(e){if(e)return this.raw.headers.get(e)??void 0;const t={};return this.raw.headers.forEach((n,r)=>{t[r]=n}),t}async parseBody(e){var t;return(t=this.bodyCache).parsedBody??(t.parsedBody=await ro(this,e))}json(){return c(this,oe).call(this,"json")}text(){return c(this,oe).call(this,"text")}arrayBuffer(){return c(this,oe).call(this,"arrayBuffer")}blob(){return c(this,oe).call(this,"blob")}formData(){return c(this,oe).call(this,"formData")}addValidatedData(e,t){c(this,Ce)[e]=t}valid(e){return c(this,Ce)[e]}get url(){return this.raw.url}get method(){return this.raw.method}get matchedRoutes(){return c(this,U)[0].map(([[,e]])=>e)}get routePath(){return c(this,U)[0].map(([[,e]])=>e)[this.routeIndex].path}},Ce=new WeakMap,U=new WeakMap,ne=new WeakSet,or=function(e){const t=c(this,U)[0][this.routeIndex][1][e],n=C(this,ne,Ht).call(this,t);return n?/\%/.test(n)?gn(n):n:void 0},ir=function(){const e={},t=Object.keys(c(this,U)[0][this.routeIndex][1]);for(const n of t){const r=C(this,ne,Ht).call(this,c(this,U)[0][this.routeIndex][1][n]);r&&typeof r=="string"&&(e[n]=/\%/.test(r)?gn(r):r)}return e},Ht=function(e){return c(this,U)[1]?c(this,U)[1][e]:e},oe=new WeakMap,wn),go="text/plain; charset=UTF-8",Pt=(e,t={})=>{for(const n of Object.keys(t))e.set(n,t[n]);return e},Ge,qe,J,ve,Q,_,$,L,Y,Ke,Ae,ke,Xe,Ze,I,F,xn,vo=(xn=class{constructor(e,t){R(this,I);R(this,Ge);R(this,qe);x(this,"env",{});R(this,J);x(this,"finalized",!1);x(this,"error");R(this,ve,200);R(this,Q);R(this,_);R(this,$);R(this,L);R(this,Y,!0);R(this,Ke);R(this,Ae);R(this,ke);R(this,Xe);R(this,Ze);x(this,"render",(...e)=>(c(this,Ae)??v(this,Ae,t=>this.html(t)),c(this,Ae).call(this,...e)));x(this,"setLayout",e=>v(this,Ke,e));x(this,"getLayout",()=>c(this,Ke));x(this,"setRenderer",e=>{v(this,Ae,e)});x(this,"header",(e,t,n)=>{if(this.finalized&&v(this,L,new Response(c(this,L).body,c(this,L))),t===void 0){c(this,_)?c(this,_).delete(e):c(this,$)&&delete c(this,$)[e.toLocaleLowerCase()],this.finalized&&this.res.headers.delete(e);return}n!=null&&n.append?(c(this,_)||(v(this,Y,!1),v(this,_,new Headers(c(this,$))),v(this,$,{})),c(this,_).append(e,t)):c(this,_)?c(this,_).set(e,t):(c(this,$)??v(this,$,{}),c(this,$)[e.toLowerCase()]=t),this.finalized&&(n!=null&&n.append?this.res.headers.append(e,t):this.res.headers.set(e,t))});x(this,"status",e=>{v(this,Y,!1),v(this,ve,e)});x(this,"set",(e,t)=>{c(this,J)??v(this,J,new Map),c(this,J).set(e,t)});x(this,"get",e=>c(this,J)?c(this,J).get(e):void 0);x(this,"newResponse",(...e)=>C(this,I,F).call(this,...e));x(this,"body",(e,t,n)=>typeof t=="number"?C(this,I,F).call(this,e,t,n):C(this,I,F).call(this,e,t));x(this,"text",(e,t,n)=>{if(!c(this,$)){if(c(this,Y)&&!n&&!t)return new Response(e);v(this,$,{})}return c(this,$)["content-type"]=go,typeof t=="number"?C(this,I,F).call(this,e,t,n):C(this,I,F).call(this,e,t)});x(this,"json",(e,t,n)=>{const r=JSON.stringify(e);return c(this,$)??v(this,$,{}),c(this,$)["content-type"]="application/json",typeof t=="number"?C(this,I,F).call(this,r,t,n):C(this,I,F).call(this,r,t)});x(this,"html",(e,t,n)=>(c(this,$)??v(this,$,{}),c(this,$)["content-type"]="text/html; charset=UTF-8",typeof e=="object"?Tn(e,$n.Stringify,!1,{}).then(r=>typeof t=="number"?C(this,I,F).call(this,r,t,n):C(this,I,F).call(this,r,t)):typeof t=="number"?C(this,I,F).call(this,e,t,n):C(this,I,F).call(this,e,t)));x(this,"redirect",(e,t)=>(c(this,_)??v(this,_,new Headers),c(this,_).set("Location",String(e)),this.newResponse(null,t??302)));x(this,"notFound",()=>(c(this,ke)??v(this,ke,()=>new Response),c(this,ke).call(this,this)));v(this,Ge,e),t&&(v(this,Q,t.executionCtx),this.env=t.env,v(this,ke,t.notFoundHandler),v(this,Ze,t.path),v(this,Xe,t.matchResult))}get req(){return c(this,qe)??v(this,qe,new sr(c(this,Ge),c(this,Ze),c(this,Xe))),c(this,qe)}get event(){if(c(this,Q)&&"respondWith"in c(this,Q))return c(this,Q);throw Error("This context has no FetchEvent")}get executionCtx(){if(c(this,Q))return c(this,Q);throw Error("This context has no ExecutionContext")}get res(){return v(this,Y,!1),c(this,L)||v(this,L,new Response("404 Not Found",{status:404}))}set res(e){if(v(this,Y,!1),c(this,L)&&e){e=new Response(e.body,e);for(const[t,n]of c(this,L).headers.entries())if(t!=="content-type")if(t==="set-cookie"){const r=c(this,L).headers.getSetCookie();e.headers.delete("set-cookie");for(const s of r)e.headers.append("set-cookie",s)}else e.headers.set(t,n)}v(this,L,e),this.finalized=!0}get var(){return c(this,J)?Object.fromEntries(c(this,J)):{}}},Ge=new WeakMap,qe=new WeakMap,J=new WeakMap,ve=new WeakMap,Q=new WeakMap,_=new WeakMap,$=new WeakMap,L=new WeakMap,Y=new WeakMap,Ke=new WeakMap,Ae=new WeakMap,ke=new WeakMap,Xe=new WeakMap,Ze=new WeakMap,I=new WeakSet,F=function(e,t,n){if(c(this,Y)&&!n&&!t&&c(this,ve)===200)return new Response(e,{headers:c(this,$)});if(t&&typeof t!="number"){const s=new Headers(t.headers);c(this,_)&&c(this,_).forEach((i,a)=>{a==="set-cookie"?s.append(a,i):s.set(a,i)});const o=Pt(s,c(this,$));return new Response(e,{headers:o,status:t.status??c(this,ve)})}const r=typeof t=="number"?t:c(this,ve);c(this,$)??v(this,$,{}),c(this,_)??v(this,_,new Headers),Pt(c(this,_),c(this,$)),c(this,L)&&(c(this,L).headers.forEach((s,o)=>{var i,a;o==="set-cookie"?(i=c(this,_))==null||i.append(o,s):(a=c(this,_))==null||a.set(o,s)}),Pt(c(this,_),c(this,$))),n??(n={});for(const[s,o]of Object.entries(n))if(typeof o=="string")c(this,_).set(s,o);else{c(this,_).delete(s);for(const i of o)c(this,_).append(s,i)}return new Response(e,{status:r,headers:c(this,_)})},xn),j="ALL",yo="all",bo=["get","post","put","delete","options","patch"],ar="Can not add a route since the matcher is already built.",lr=class extends Error{},wo=e=>e.text("404 Not Found",404),vn=(e,t)=>{if("getResponse"in e){const n=e.getResponse();return t.newResponse(n.body,n)}return console.error(e),t.text("Internal Server Error",500)},z,N,ur,W,me,ct,ut,En,cr=(En=class{constructor(t={}){R(this,N);x(this,"get");x(this,"post");x(this,"put");x(this,"delete");x(this,"options");x(this,"patch");x(this,"all");x(this,"on");x(this,"use");x(this,"router");x(this,"getPath");x(this,"_basePath","/");R(this,z,"/");x(this,"routes",[]);R(this,W,wo);x(this,"errorHandler",vn);x(this,"onError",t=>(this.errorHandler=t,this));x(this,"notFound",t=>(v(this,W,t),this));x(this,"fetch",(t,...n)=>C(this,N,ut).call(this,t,n[1],n[0],t.method));x(this,"request",(t,n,r,s)=>t instanceof Request?this.fetch(n?new Request(t,n):t,r,s):(t=t.toString(),this.fetch(new Request(/^https?:\/\//.test(t)?t:`http://localhost${Oe("/",t)}`,n),r,s)));x(this,"fire",()=>{addEventListener("fetch",t=>{t.respondWith(C(this,N,ut).call(this,t.request,t,void 0,t.request.method))})});[...bo,yo].forEach(o=>{this[o]=(i,...a)=>(typeof i=="string"?v(this,z,i):C(this,N,me).call(this,o,c(this,z),i),a.forEach(l=>{C(this,N,me).call(this,o,c(this,z),l)}),this)}),this.on=(o,i,...a)=>{for(const l of[i].flat()){v(this,z,l);for(const u of[o].flat())a.map(f=>{C(this,N,me).call(this,u.toUpperCase(),c(this,z),f)})}return this},this.use=(o,...i)=>(typeof o=="string"?v(this,z,o):(v(this,z,"*"),i.unshift(o)),i.forEach(a=>{C(this,N,me).call(this,j,c(this,z),a)}),this);const{strict:r,...s}=t;Object.assign(this,s),this.getPath=r??!0?t.getPath??er:ho}route(t,n){const r=this.basePath(t);return n.routes.map(s=>{var i;let o;n.errorHandler===vn?o=s.handler:(o=async(a,l)=>(await pn([],n.errorHandler)(a,()=>s.handler(a,l))).res,o[$t]=s.handler),C(i=r,N,me).call(i,s.method,s.path,o)}),this}basePath(t){const n=C(this,N,ur).call(this);return n._basePath=Oe(this._basePath,t),n}mount(t,n,r){let s,o;r&&(typeof r=="function"?o=r:(o=r.optionHandler,r.replaceRequest===!1?s=l=>l:s=r.replaceRequest));const i=o?l=>{const u=o(l);return Array.isArray(u)?u:[u]}:l=>{let u;try{u=l.executionCtx}catch{}return[l.env,u]};s||(s=(()=>{const l=Oe(this._basePath,t),u=l==="/"?0:l.length;return f=>{const h=new URL(f.url);return h.pathname=h.pathname.slice(u)||"/",new Request(h,f)}})());const a=async(l,u)=>{const f=await n(s(l.req.raw),...i(l));if(f)return f;await u()};return C(this,N,me).call(this,j,Oe(t,"*"),a),this}},z=new WeakMap,N=new WeakSet,ur=function(){const t=new cr({router:this.router,getPath:this.getPath});return t.errorHandler=this.errorHandler,v(t,W,c(this,W)),t.routes=this.routes,t},W=new WeakMap,me=function(t,n,r){t=t.toUpperCase(),n=Oe(this._basePath,n);const s={path:n,method:t,handler:r};this.router.add(t,n,[r,s]),this.routes.push(s)},ct=function(t,n){if(t instanceof Error)return this.errorHandler(t,n);throw t},ut=function(t,n,r,s){if(s==="HEAD")return(async()=>new Response(null,await C(this,N,ut).call(this,t,n,r,"GET")))();const o=this.getPath(t,{env:r}),i=this.router.match(s,o),a=new vo(t,{path:o,matchResult:i,env:r,executionCtx:n,notFoundHandler:c(this,W)});if(i[0].length===1){let u;try{u=i[0][0][0][0](a,async()=>{a.res=await c(this,W).call(this,a)})}catch(f){return C(this,N,ct).call(this,f,a)}return u instanceof Promise?u.then(f=>f||(a.finalized?a.res:c(this,W).call(this,a))).catch(f=>C(this,N,ct).call(this,f,a)):u??c(this,W).call(this,a)}const l=pn(i[0],this.errorHandler,c(this,W));return(async()=>{try{const u=await l(a);if(!u.finalized)throw new Error("Context is not finalized. Did you forget to return a Response object or `await next()`?");return u.res}catch(u){return C(this,N,ct).call(this,u,a)}})()},En),mt="[^/]+",Be=".*",Ue="(?:|/.*)",He=Symbol(),xo=new Set(".\\+*[^]$()");function Eo(e,t){return e.length===1?t.length===1?e<t?-1:1:-1:t.length===1||e===Be||e===Ue?1:t===Be||t===Ue?-1:e===mt?1:t===mt?-1:e.length===t.length?e<t?-1:1:t.length-e.length}var ye,be,V,Sn,Ft=(Sn=class{constructor(){R(this,ye);R(this,be);R(this,V,Object.create(null))}insert(t,n,r,s,o){if(t.length===0){if(c(this,ye)!==void 0)throw He;if(o)return;v(this,ye,n);return}const[i,...a]=t,l=i==="*"?a.length===0?["","",Be]:["","",mt]:i==="/*"?["","",Ue]:i.match(/^\:([^\{\}]+)(?:\{(.+)\})?$/);let u;if(l){const f=l[1];let h=l[2]||mt;if(f&&l[2]&&(h=h.replace(/^\((?!\?:)(?=[^)]+\)$)/,"(?:"),/\((?!\?:)/.test(h)))throw He;if(u=c(this,V)[h],!u){if(Object.keys(c(this,V)).some(d=>d!==Be&&d!==Ue))throw He;if(o)return;u=c(this,V)[h]=new Ft,f!==""&&v(u,be,s.varIndex++)}!o&&f!==""&&r.push([f,c(u,be)])}else if(u=c(this,V)[i],!u){if(Object.keys(c(this,V)).some(f=>f.length>1&&f!==Be&&f!==Ue))throw He;if(o)return;u=c(this,V)[i]=new Ft}u.insert(a,n,r,s,o)}buildRegExpStr(){const n=Object.keys(c(this,V)).sort(Eo).map(r=>{const s=c(this,V)[r];return(typeof c(s,be)=="number"?`(${r})@${c(s,be)}`:xo.has(r)?`\\${r}`:r)+s.buildRegExpStr()});return typeof c(this,ye)=="number"&&n.unshift(`#${c(this,ye)}`),n.length===0?"":n.length===1?n[0]:"(?:"+n.join("|")+")"}},ye=new WeakMap,be=new WeakMap,V=new WeakMap,Sn),gt,Je,Rn,So=(Rn=class{constructor(){R(this,gt,{varIndex:0});R(this,Je,new Ft)}insert(e,t,n){const r=[],s=[];for(let i=0;;){let a=!1;if(e=e.replace(/\{[^}]+\}/g,l=>{const u=`@\\${i}`;return s[i]=[u,l],i++,a=!0,u}),!a)break}const o=e.match(/(?::[^\/]+)|(?:\/\*$)|./g)||[];for(let i=s.length-1;i>=0;i--){const[a]=s[i];for(let l=o.length-1;l>=0;l--)if(o[l].indexOf(a)!==-1){o[l]=o[l].replace(a,s[i][1]);break}}return c(this,Je).insert(o,t,r,c(this,gt),n),r}buildRegExp(){let e=c(this,Je).buildRegExpStr();if(e==="")return[/^$/,[],[]];let t=0;const n=[],r=[];return e=e.replace(/#(\d+)|@(\d+)|\.\*\$/g,(s,o,i)=>o!==void 0?(n[++t]=Number(o),"$()"):(i!==void 0&&(r[Number(i)]=++t),"")),[new RegExp(`^${e}`),n,r]}},gt=new WeakMap,Je=new WeakMap,Rn),fr=[],Ro=[/^$/,[],Object.create(null)],ft=Object.create(null);function hr(e){return ft[e]??(ft[e]=new RegExp(e==="*"?"":`^${e.replace(/\/\*$|([.\\+*[^\]$()])/g,(t,n)=>n?`\\${n}`:"(?:|/.*)")}$`))}function Oo(){ft=Object.create(null)}function Co(e){var u;const t=new So,n=[];if(e.length===0)return Ro;const r=e.map(f=>[!/\*|\/:/.test(f[0]),...f]).sort(([f,h],[d,g])=>f?1:d?-1:h.length-g.length),s=Object.create(null);for(let f=0,h=-1,d=r.length;f<d;f++){const[g,y,m]=r[f];g?s[y]=[m.map(([w])=>[w,Object.create(null)]),fr]:h++;let b;try{b=t.insert(y,h,g)}catch(w){throw w===He?new lr(y):w}g||(n[h]=m.map(([w,E])=>{const S=Object.create(null);for(E-=1;E>=0;E--){const[O,A]=b[E];S[O]=A}return[w,S]}))}const[o,i,a]=t.buildRegExp();for(let f=0,h=n.length;f<h;f++)for(let d=0,g=n[f].length;d<g;d++){const y=(u=n[f][d])==null?void 0:u[1];if(!y)continue;const m=Object.keys(y);for(let b=0,w=m.length;b<w;b++)y[m[b]]=a[y[m[b]]]}const l=[];for(const f in i)l[f]=n[i[f]];return[o,l,s]}function Re(e,t){if(e){for(const n of Object.keys(e).sort((r,s)=>s.length-r.length))if(hr(n).test(t))return[...e[n]]}}var ie,ae,Me,dr,pr,On,Ao=(On=class{constructor(){R(this,Me);x(this,"name","RegExpRouter");R(this,ie);R(this,ae);v(this,ie,{[j]:Object.create(null)}),v(this,ae,{[j]:Object.create(null)})}add(e,t,n){var a;const r=c(this,ie),s=c(this,ae);if(!r||!s)throw new Error(ar);r[e]||[r,s].forEach(l=>{l[e]=Object.create(null),Object.keys(l[j]).forEach(u=>{l[e][u]=[...l[j][u]]})}),t==="/*"&&(t="*");const o=(t.match(/\/:/g)||[]).length;if(/\*$/.test(t)){const l=hr(t);e===j?Object.keys(r).forEach(u=>{var f;(f=r[u])[t]||(f[t]=Re(r[u],t)||Re(r[j],t)||[])}):(a=r[e])[t]||(a[t]=Re(r[e],t)||Re(r[j],t)||[]),Object.keys(r).forEach(u=>{(e===j||e===u)&&Object.keys(r[u]).forEach(f=>{l.test(f)&&r[u][f].push([n,o])})}),Object.keys(s).forEach(u=>{(e===j||e===u)&&Object.keys(s[u]).forEach(f=>l.test(f)&&s[u][f].push([n,o]))});return}const i=tr(t)||[t];for(let l=0,u=i.length;l<u;l++){const f=i[l];Object.keys(s).forEach(h=>{var d;(e===j||e===h)&&((d=s[h])[f]||(d[f]=[...Re(r[h],f)||Re(r[j],f)||[]]),s[h][f].push([n,o-u+l+1]))})}}match(e,t){Oo();const n=C(this,Me,dr).call(this);return this.match=(r,s)=>{const o=n[r]||n[j],i=o[2][s];if(i)return i;const a=s.match(o[0]);if(!a)return[[],fr];const l=a.indexOf("",1);return[o[1][l],a]},this.match(e,t)}},ie=new WeakMap,ae=new WeakMap,Me=new WeakSet,dr=function(){const e=Object.create(null);return Object.keys(c(this,ae)).concat(Object.keys(c(this,ie))).forEach(t=>{e[t]||(e[t]=C(this,Me,pr).call(this,t))}),v(this,ie,v(this,ae,void 0)),e},pr=function(e){const t=[];let n=e===j;return[c(this,ie),c(this,ae)].forEach(r=>{const s=r[e]?Object.keys(r[e]).map(o=>[o,r[e][o]]):[];s.length!==0?(n||(n=!0),t.push(...s)):e!==j&&t.push(...Object.keys(r[j]).map(o=>[o,r[j][o]]))}),n?Co(t):null},On),le,ee,Cn,ko=(Cn=class{constructor(e){x(this,"name","SmartRouter");R(this,le,[]);R(this,ee,[]);v(this,le,e.routers)}add(e,t,n){if(!c(this,ee))throw new Error(ar);c(this,ee).push([e,t,n])}match(e,t){if(!c(this,ee))throw new Error("Fatal error");const n=c(this,le),r=c(this,ee),s=n.length;let o=0,i;for(;o<s;o++){const a=n[o];try{for(let l=0,u=r.length;l<u;l++)a.add(...r[l]);i=a.match(e,t)}catch(l){if(l instanceof lr)continue;throw l}this.match=a.match.bind(a),v(this,le,[a]),v(this,ee,void 0);break}if(o===s)throw new Error("Fatal error");return this.name=`SmartRouter + ${this.activeRouter.name}`,i}get activeRouter(){if(c(this,ee)||c(this,le).length!==1)throw new Error("No active router has been determined yet.");return c(this,le)[0]}},le=new WeakMap,ee=new WeakMap,Cn),De=Object.create(null),ce,D,we,Pe,M,te,ge,An,mr=(An=class{constructor(e,t,n){R(this,te);R(this,ce);R(this,D);R(this,we);R(this,Pe,0);R(this,M,De);if(v(this,D,n||Object.create(null)),v(this,ce,[]),e&&t){const r=Object.create(null);r[e]={handler:t,possibleKeys:[],score:0},v(this,ce,[r])}v(this,we,[])}insert(e,t,n){v(this,Pe,++Jt(this,Pe)._);let r=this;const s=lo(t),o=[];for(let l=0,u=s.length;l<u;l++){const f=s[l],h=s[l+1],d=mn(f,h),g=Array.isArray(d)?d[0]:f;if(Object.keys(c(r,D)).includes(g)){r=c(r,D)[g];const y=mn(f,h);y&&o.push(y[1]);continue}c(r,D)[g]=new mr,d&&(c(r,we).push(d),o.push(d[1])),r=c(r,D)[g]}const i=Object.create(null),a={handler:n,possibleKeys:o.filter((l,u,f)=>f.indexOf(l)===u),score:c(this,Pe)};return i[e]=a,c(r,ce).push(i),r}search(e,t){var a;const n=[];v(this,M,De);let s=[this];const o=Qn(t),i=[];for(let l=0,u=o.length;l<u;l++){const f=o[l],h=l===u-1,d=[];for(let g=0,y=s.length;g<y;g++){const m=s[g],b=c(m,D)[f];b&&(v(b,M,c(m,M)),h?(c(b,D)["*"]&&n.push(...C(this,te,ge).call(this,c(b,D)["*"],e,c(m,M))),n.push(...C(this,te,ge).call(this,b,e,c(m,M)))):d.push(b));for(let w=0,E=c(m,we).length;w<E;w++){const S=c(m,we)[w],O=c(m,M)===De?{}:{...c(m,M)};if(S==="*"){const P=c(m,D)["*"];P&&(n.push(...C(this,te,ge).call(this,P,e,c(m,M))),v(P,M,O),d.push(P));continue}if(f==="")continue;const[A,q,K]=S,H=c(m,D)[A],vt=o.slice(l).join("/");if(K instanceof RegExp){const P=K.exec(vt);if(P){if(O[q]=P[0],n.push(...C(this,te,ge).call(this,H,e,c(m,M),O)),Object.keys(c(H,D)).length){v(H,M,O);const T=((a=P[0].match(/\//))==null?void 0:a.length)??0;(i[T]||(i[T]=[])).push(H)}continue}}(K===!0||K.test(f))&&(O[q]=f,h?(n.push(...C(this,te,ge).call(this,H,e,O,c(m,M))),c(H,D)["*"]&&n.push(...C(this,te,ge).call(this,c(H,D)["*"],e,O,c(m,M)))):(v(H,M,O),d.push(H)))}}s=d.concat(i.shift()??[])}return n.length>1&&n.sort((l,u)=>l.score-u.score),[n.map(({handler:l,params:u})=>[l,u])]}},ce=new WeakMap,D=new WeakMap,we=new WeakMap,Pe=new WeakMap,M=new WeakMap,te=new WeakSet,ge=function(e,t,n,r){const s=[];for(let o=0,i=c(e,ce).length;o<i;o++){const a=c(e,ce)[o],l=a[t]||a[j],u={};if(l!==void 0&&(l.params=Object.create(null),s.push(l),n!==De||r&&r!==De))for(let f=0,h=l.possibleKeys.length;f<h;f++){const d=l.possibleKeys[f],g=u[l.score];l.params[d]=r!=null&&r[d]&&!g?r[d]:n[d]??(r==null?void 0:r[d]),u[l.score]=!0}}return s},An),xe,kn,Po=(kn=class{constructor(){x(this,"name","TrieRouter");R(this,xe);v(this,xe,new mr)}add(e,t,n){const r=tr(t);if(r){for(let s=0,o=r.length;s<o;s++)c(this,xe).insert(e,r[s],n);return}c(this,xe).insert(e,t,n)}match(e,t){return c(this,xe).search(e,t)}},xe=new WeakMap,kn),ht=class extends cr{constructor(e={}){super(e),this.router=e.router??new ko({routers:[new Ao,new Po]})}},_o=e=>e;const gr=new Ar,yn=e=>(e=e.replace(/\.tsx?$/g,"").replace(/\.mdx?$/g,"").replace(/^\/?index$/,"/").replace(/\/index$/,"").replace(/\[\.{3}.+\]/,"*").replace(/\((.+?)\)/g,"").replace(/\[(.+?)\]/g,":$1").replace(/\/\//g,"/"),/^\//.test(e)?e:"/"+e),_t=e=>{const t={};for(const[n,r]of Object.entries(e)){const s=n.split("/"),o=s.pop(),i=s.join("/");t[i]||(t[i]={}),o&&(t[i][o]=r)}for(const[n,r]of Object.entries(t)){const s=Object.entries(r).sort(([o],[i])=>o[0]==="["&&i[0]!=="["?1:o[0]!=="["&&i[0]==="["?-1:o.localeCompare(i));t[n]=Object.fromEntries(s)}return t},$o=e=>Object.keys(e).sort((n,r)=>{const s=n.split("/").length,o=r.split("/").length;return s-o||r.localeCompare(n)}).map(n=>({[n]:e[n]})),jo=e=>{const t={};for(const r of Object.keys(e)){const s=r.split("/");s.pop();const o=s.join("/");t[o]||(t[o]=[]),t[o].includes(r)||t[o].push(r)}const n=Object.keys(t).sort((r,s)=>s.length-r.length);for(const r of n)for(const s of n)if(s.startsWith(r)&&s!==r){const o=new Set([...t[s],...t[r]]);t[s]=[...o]}return t},vr="_404.tsx",No="_error.tsx",To=["GET","POST","PUT","DELETE","OPTIONS","PATCH"],Mo=e=>{const t=e.root,n=new RegExp(`^${t}`),r=b=>yn(b.replace(n,"")),s=new ht;s.use(async function(w,E){await gr.run(w,()=>E())});const o=e.NOT_FOUND,i=_t(o),a=e.ERROR,l=_t(a),u=e.RENDERER,f=jo(u),h=e.MIDDLEWARE,d=e.ROUTES,g=$o(_t(d)),y=(b,w)=>{let E=w[b]??[];const S=A=>(E=w[A.join("/")],E||(A.pop(),A.length&&S(A)),E??[]),O=b.split("/");return E=S(O),E.sort((A,q)=>A.split("/").length-q.split("/").length),E},m={};for(const b of g)for(const[w,E]of Object.entries(b)){const S=new ht;let O=!1;const A=Do(w,i);A&&S.use(async(P,T)=>{if(await T(),P.res.status===404){const he=await A(P),X=new Response(he.body,{status:404,headers:he.headers});P.res=X}}),y(w,f).map(P=>{const T=u[P];T[fe]&&(O=!0);const X=T.default;X&&S.all("*",X)});const K=Object.keys(h).find(P=>{const T=w.replaceAll("[","\\[").replaceAll("]","\\]").replaceAll("(","\\(").replaceAll(")","\\)");return new RegExp(T+"/_middleware.tsx?").test(P)});if(K){const P=h[K];P.default&&S.use(...P.default)}for(const[P,T]of Object.entries(E)){const he=T[fe],X=_o(async function(se,Rr){se.set(fe,he?!0:O),await Rr()}),re=T.default,de=yn(P);re&&"fetch"in re&&(S.use(X),S.route(de,re));for(const pe of To){const se=T[pe];se&&(S.on(pe,de,X),S.on(pe,de,...se))}re&&Array.isArray(re)&&(S.get(de,X),S.get(de,...re)),typeof re=="function"&&(S.get(de,X),S.get(de,async pe=>{const se=await re(pe);return se instanceof Response?se:pe.render(se,T)}))}const H=Lo(w,l);H&&(m[w]=H);for(const[P,T]of Object.entries(m))new RegExp(`^${P}`).test(w)&&T&&S.onError(T);let vt=r(w);s.route(vt,S)}for(const b of g.reverse()){const w=Object.entries(b)[0][0],E=new ht;Io(E,w,i);const S=r(w);s.route(S,E)}return s};function Do(e,t){for(const[n,r]of Object.entries(t))if(e===n){const s=r[vr];if(s)return s.default}}function Io(e,t,n){for(const[r,s]of Object.entries(n))if(t===r){const o=s[vr];if(o){const i=o.default;o[fe]&&e.use("*",(l,u)=>(l.set(fe,!0),u())),e.get("*",l=>(l.status(404),i(l)))}}}function Lo(e,t){for(const[n,r]of Object.entries(t))if(e===n){const s=r[No];if(s){const o=s.default;if(o)return async(a,l)=>{const u=s[fe];return u&&l.set(fe,u),l.status(500),o(a,l)}}}}const Ho=e=>Mo({root:"/app/routes",NOT_FOUND:Object.assign({"/app/routes/_404.tsx":Nr}),ERROR:Object.assign({"/app/routes/_error.tsx":Mr}),RENDERER:Object.assign({"/app/routes/_renderer.tsx":Os}),MIDDLEWARE:Object.assign({}),ROUTES:Object.assign({"/app/routes/index.tsx":no})}),Fo=({children:e})=>{const t=gr.getStore();if(!t)throw new Error("No context found");return p($e,{children:t.get(fe)&&e})},Bo={"_honox-island-CQuY1a2M.js":{file:"static/honox-island-CQuY1a2M.js",name:"honox-island",imports:["app/client.ts"]},"_index-BSr-VoXW.js":{file:"static/index-BSr-VoXW.js",name:"index"},"app/client.ts":{file:"static/client-CNZ66wQm.js",name:"client",src:"app/client.ts",isEntry:!0,dynamicImports:["app/islands/CollapsibleSection.tsx","app/islands/DownloadSection.tsx","app/islands/SectionGroup.tsx","node_modules/honox/dist/client/runtime.js","node_modules/honox/dist/client/runtime.js"]},"app/islands/CollapsibleSection.tsx":{file:"static/CollapsibleSection-Bb31vRlJ.js",name:"CollapsibleSection",src:"app/islands/CollapsibleSection.tsx",isDynamicEntry:!0,imports:["app/client.ts","_honox-island-CQuY1a2M.js","_index-BSr-VoXW.js"]},"app/islands/DownloadSection.tsx":{file:"static/DownloadSection-KVuGlPTN.js",name:"DownloadSection",src:"app/islands/DownloadSection.tsx",isDynamicEntry:!0,imports:["app/client.ts","_honox-island-CQuY1a2M.js"]},"app/islands/SectionGroup.tsx":{file:"static/SectionGroup-Ci_1rRZ-.js",name:"SectionGroup",src:"app/islands/SectionGroup.tsx",isDynamicEntry:!0,imports:["app/client.ts","_honox-island-CQuY1a2M.js","_index-BSr-VoXW.js"]},"app/style.css":{file:"static/style-dQLYS03r.css",src:"app/style.css",isEntry:!0},"node_modules/honox/dist/client/runtime.js":{file:"static/runtime-BOlPsHE7.js",name:"runtime",src:"node_modules/honox/dist/client/runtime.js",isDynamicEntry:!0,imports:["app/client.ts"]}},yr=Object.freeze(Object.defineProperty({__proto__:null,default:Bo},Symbol.toStringTag,{value:"Module"})),br=e=>e.endsWith("/")?e:e+"/",Uo=e=>{const t=e.src;if(e.prod??!0){let n=e.manifest;if(!n){const r=Object.assign({"/dist/.vite/manifest.json":yr});for(const[,s]of Object.entries(r))if(s.default){n=s.default;break}}if(n){const r=n[t.replace(/^\//,"")];if(r)return p(Fo,{children:p("script",{type:"module",async:!!e.async,src:`${br("/resume/")}${r.file}`,nonce:e.nonce})})}return p($e,{})}else return p("script",{type:"module",async:!!e.async,src:t,nonce:e.nonce})},zo=e=>{let{href:t,prod:n,manifest:r,...s}=e;if(t)if(n??!0){if(!r){const o=Object.assign({"/dist/.vite/manifest.json":yr});for(const[,i]of Object.entries(o))if(i.default){r=i.default;break}}if(r){const o=r[t.replace(/^\//,"")];if(o)return t.startsWith("/")?p("link",{href:`${br("/resume/")}${o.file}`,...s}):p("link",{href:o.file,...s})}return p($e,{})}else return p("link",{href:t,...s});return p("link",{...s})},wr=Ho();$r(wr);const Bt=new ht,xr=Object.assign({"/app/server.ts":wr});let Er=!1;for(const[,e]of Object.entries(xr))e&&(Bt.all("*",t=>{let n;try{n=t.executionCtx}catch{}return e.fetch(t.req.raw,t.env,n)}),Bt.notFound(t=>{let n;try{n=t.executionCtx}catch{}return e.fetch(t.req.raw,t.env,n)}),Er=!0);if(!Er)throw new Error("Can't import modules from ['/src/index.ts','/src/index.tsx','/app/server.ts']");const Sr={},bn=new Set;for(const[e,t]of Object.entries(xr))for(const[n,r]of Object.entries(t))if(n!=="fetch"){if(bn.has(n))throw new Error(`Handler "${n}" is defined in multiple entry files. Please ensure each handler (except fetch) is defined only once.`);bn.add(n),Sr[n]=r}const Ko={...Sr,fetch:Bt.fetch};export{Ko as default};
